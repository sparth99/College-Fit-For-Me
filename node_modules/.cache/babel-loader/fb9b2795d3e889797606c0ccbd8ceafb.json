{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _createReactClass = require('create-react-class');\n\nvar _createReactClass2 = _interopRequireDefault(_createReactClass);\n\nvar _Chart = require('./Chart');\n\nvar _Chart2 = _interopRequireDefault(_Chart);\n\nvar _Axis = require('./Axis');\n\nvar _Axis2 = _interopRequireDefault(_Axis);\n\nvar _Bar = require('./Bar');\n\nvar _Bar2 = _interopRequireDefault(_Bar);\n\nvar _Tooltip = require('./Tooltip');\n\nvar _Tooltip2 = _interopRequireDefault(_Tooltip);\n\nvar _DefaultPropsMixin = require('./DefaultPropsMixin');\n\nvar _DefaultPropsMixin2 = _interopRequireDefault(_DefaultPropsMixin);\n\nvar _HeightWidthMixin = require('./HeightWidthMixin');\n\nvar _HeightWidthMixin2 = _interopRequireDefault(_HeightWidthMixin);\n\nvar _ArrayifyMixin = require('./ArrayifyMixin');\n\nvar _ArrayifyMixin2 = _interopRequireDefault(_ArrayifyMixin);\n\nvar _StackAccessorMixin = require('./StackAccessorMixin');\n\nvar _StackAccessorMixin2 = _interopRequireDefault(_StackAccessorMixin);\n\nvar _StackDataMixin = require('./StackDataMixin');\n\nvar _StackDataMixin2 = _interopRequireDefault(_StackDataMixin);\n\nvar _DefaultScalesMixin = require('./DefaultScalesMixin');\n\nvar _DefaultScalesMixin2 = _interopRequireDefault(_DefaultScalesMixin);\n\nvar _TooltipMixin = require('./TooltipMixin');\n\nvar _TooltipMixin2 = _interopRequireDefault(_TooltipMixin);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar array = _propTypes2.default.array,\n    func = _propTypes2.default.func;\nvar DataSet = (0, _createReactClass2.default)({\n  displayName: 'DataSet',\n  propTypes: {\n    data: array.isRequired,\n    xScale: func.isRequired,\n    yScale: func.isRequired,\n    colorScale: func.isRequired,\n    values: func.isRequired,\n    label: func.isRequired,\n    x: func.isRequired,\n    y: func.isRequired,\n    y0: func.isRequired\n  },\n  render: function render() {\n    var _props = this.props,\n        data = _props.data,\n        xScale = _props.xScale,\n        yScale = _props.yScale,\n        colorScale = _props.colorScale,\n        values = _props.values,\n        label = _props.label,\n        x = _props.x,\n        y = _props.y,\n        y0 = _props.y0,\n        onMouseEnter = _props.onMouseEnter,\n        onMouseLeave = _props.onMouseLeave,\n        groupedBars = _props.groupedBars,\n        colorByLabel = _props.colorByLabel;\n    var bars = void 0;\n\n    if (groupedBars) {\n      bars = data.map(function (stack, serieIndex) {\n        return values(stack).map(function (e, index) {\n          var yVal = y(e) < 0 ? yScale(0) : yScale(y(e));\n          return _react2.default.createElement(_Bar2.default, {\n            key: label(stack) + '.' + index,\n            width: xScale.rangeBand() / data.length,\n            height: Math.abs(yScale(0) - yScale(y(e))),\n            x: xScale(x(e)) + xScale.rangeBand() * serieIndex / data.length,\n            y: yVal,\n            fill: colorScale(label(stack)),\n            data: e,\n            onMouseEnter: onMouseEnter,\n            onMouseLeave: onMouseLeave\n          });\n        });\n      });\n    } else {\n      bars = data.map(function (stack) {\n        return values(stack).map(function (e, index) {\n          var color = colorByLabel ? colorScale(label(stack)) : colorScale(x(e));\n          var yVal = y(e) < 0 ? yScale(y0(e)) : yScale(y0(e) + y(e));\n          return _react2.default.createElement(_Bar2.default, {\n            key: label(stack) + '.' + index,\n            width: xScale.rangeBand(),\n            height: Math.abs(yScale(y0(e) + y(e)) - yScale(y0(e))),\n            x: xScale(x(e)),\n            y: yVal,\n            fill: color,\n            data: e,\n            onMouseEnter: onMouseEnter,\n            onMouseLeave: onMouseLeave\n          });\n        });\n      });\n    }\n\n    return _react2.default.createElement('g', null, bars);\n  }\n});\nvar BarChart = (0, _createReactClass2.default)({\n  displayName: 'BarChart',\n  mixins: [_DefaultPropsMixin2.default, _HeightWidthMixin2.default, _ArrayifyMixin2.default, _StackAccessorMixin2.default, _StackDataMixin2.default, _DefaultScalesMixin2.default, _TooltipMixin2.default],\n  getDefaultProps: function getDefaultProps() {\n    return {\n      colorByLabel: true\n    };\n  },\n  _tooltipHtml: function _tooltipHtml(d) {\n    var xScale = this._xScale;\n    var yScale = this._yScale;\n    var html = this.props.tooltipHtml(this.props.x(d), this.props.y0(d), this.props.y(d));\n    var midPoint = xScale.rangeBand() / 2;\n    var xPos = midPoint + xScale(this.props.x(d));\n    var topStack = this._data[this._data.length - 1].values;\n    var topElement = null; // TODO: this might not scale if dataset is huge.\n    // consider pre-computing yPos for each X\n\n    for (var i = 0; i < topStack.length; i++) {\n      if (this.props.x(topStack[i]) === this.props.x(d)) {\n        topElement = topStack[i];\n        break;\n      }\n    }\n\n    var yPos = yScale(this.props.y0(topElement) + this.props.y(topElement));\n    return [html, xPos, yPos];\n  },\n  render: function render() {\n    var _props2 = this.props,\n        xAxis = _props2.xAxis,\n        yAxis = _props2.yAxis,\n        height = _props2.height,\n        width = _props2.width,\n        margin = _props2.margin,\n        viewBox = _props2.viewBox,\n        preserveAspectRatio = _props2.preserveAspectRatio,\n        colorScale = _props2.colorScale,\n        values = _props2.values,\n        label = _props2.label,\n        y = _props2.y,\n        y0 = _props2.y0,\n        x = _props2.x,\n        groupedBars = _props2.groupedBars,\n        colorByLabel = _props2.colorByLabel,\n        tickFormat = _props2.tickFormat;\n    var data = this._data;\n    var innerWidth = this._innerWidth;\n    var innerHeight = this._innerHeight;\n    var xScale = this._xScale;\n    var yScale = this._yScale;\n    var yIntercept = this._yIntercept;\n    return _react2.default.createElement('div', null, _react2.default.createElement(_Chart2.default, {\n      height: height,\n      width: width,\n      margin: margin,\n      viewBox: viewBox,\n      preserveAspectRatio: preserveAspectRatio\n    }, _react2.default.createElement(DataSet, {\n      data: data,\n      xScale: xScale,\n      yScale: yScale,\n      colorScale: colorScale,\n      values: values,\n      label: label,\n      y: y,\n      y0: y0,\n      x: x,\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave,\n      groupedBars: groupedBars,\n      colorByLabel: colorByLabel\n    }), _react2.default.createElement(_Axis2.default, _extends({\n      className: 'x axis',\n      orientation: 'bottom',\n      scale: xScale,\n      height: innerHeight,\n      width: innerWidth,\n      zero: yIntercept,\n      tickFormat: tickFormat\n    }, xAxis)), _react2.default.createElement(_Axis2.default, _extends({\n      className: 'y axis',\n      orientation: 'left',\n      scale: yScale,\n      height: innerHeight,\n      width: innerWidth,\n      tickFormat: tickFormat\n    }, yAxis)), this.props.children), _react2.default.createElement(_Tooltip2.default, this.state.tooltip));\n  }\n});\nexports.default = BarChart;","map":{"version":3,"sources":["/Users/Parth/web-project/node_modules/react-d3-components/lib/BarChart.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_createReactClass","_createReactClass2","_Chart","_Chart2","_Axis","_Axis2","_Bar","_Bar2","_Tooltip","_Tooltip2","_DefaultPropsMixin","_DefaultPropsMixin2","_HeightWidthMixin","_HeightWidthMixin2","_ArrayifyMixin","_ArrayifyMixin2","_StackAccessorMixin","_StackAccessorMixin2","_StackDataMixin","_StackDataMixin2","_DefaultScalesMixin","_DefaultScalesMixin2","_TooltipMixin","_TooltipMixin2","obj","__esModule","default","array","func","DataSet","displayName","propTypes","data","isRequired","xScale","yScale","colorScale","values","label","x","y","y0","render","_props","props","onMouseEnter","onMouseLeave","groupedBars","colorByLabel","bars","map","stack","serieIndex","e","index","yVal","createElement","width","rangeBand","height","Math","abs","fill","color","BarChart","mixins","getDefaultProps","_tooltipHtml","d","_xScale","_yScale","html","tooltipHtml","midPoint","xPos","topStack","_data","topElement","yPos","_props2","xAxis","yAxis","margin","viewBox","preserveAspectRatio","tickFormat","innerWidth","_innerWidth","innerHeight","_innerHeight","yIntercept","_yIntercept","className","orientation","scale","zero","children","state","tooltip"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _createReactClass = require('create-react-class');\n\nvar _createReactClass2 = _interopRequireDefault(_createReactClass);\n\nvar _Chart = require('./Chart');\n\nvar _Chart2 = _interopRequireDefault(_Chart);\n\nvar _Axis = require('./Axis');\n\nvar _Axis2 = _interopRequireDefault(_Axis);\n\nvar _Bar = require('./Bar');\n\nvar _Bar2 = _interopRequireDefault(_Bar);\n\nvar _Tooltip = require('./Tooltip');\n\nvar _Tooltip2 = _interopRequireDefault(_Tooltip);\n\nvar _DefaultPropsMixin = require('./DefaultPropsMixin');\n\nvar _DefaultPropsMixin2 = _interopRequireDefault(_DefaultPropsMixin);\n\nvar _HeightWidthMixin = require('./HeightWidthMixin');\n\nvar _HeightWidthMixin2 = _interopRequireDefault(_HeightWidthMixin);\n\nvar _ArrayifyMixin = require('./ArrayifyMixin');\n\nvar _ArrayifyMixin2 = _interopRequireDefault(_ArrayifyMixin);\n\nvar _StackAccessorMixin = require('./StackAccessorMixin');\n\nvar _StackAccessorMixin2 = _interopRequireDefault(_StackAccessorMixin);\n\nvar _StackDataMixin = require('./StackDataMixin');\n\nvar _StackDataMixin2 = _interopRequireDefault(_StackDataMixin);\n\nvar _DefaultScalesMixin = require('./DefaultScalesMixin');\n\nvar _DefaultScalesMixin2 = _interopRequireDefault(_DefaultScalesMixin);\n\nvar _TooltipMixin = require('./TooltipMixin');\n\nvar _TooltipMixin2 = _interopRequireDefault(_TooltipMixin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar array = _propTypes2.default.array,\n    func = _propTypes2.default.func;\n\n\nvar DataSet = (0, _createReactClass2.default)({\n    displayName: 'DataSet',\n\n    propTypes: {\n        data: array.isRequired,\n        xScale: func.isRequired,\n        yScale: func.isRequired,\n        colorScale: func.isRequired,\n        values: func.isRequired,\n        label: func.isRequired,\n        x: func.isRequired,\n        y: func.isRequired,\n        y0: func.isRequired\n    },\n\n    render: function render() {\n        var _props = this.props,\n            data = _props.data,\n            xScale = _props.xScale,\n            yScale = _props.yScale,\n            colorScale = _props.colorScale,\n            values = _props.values,\n            label = _props.label,\n            x = _props.x,\n            y = _props.y,\n            y0 = _props.y0,\n            onMouseEnter = _props.onMouseEnter,\n            onMouseLeave = _props.onMouseLeave,\n            groupedBars = _props.groupedBars,\n            colorByLabel = _props.colorByLabel;\n\n\n        var bars = void 0;\n        if (groupedBars) {\n            bars = data.map(function (stack, serieIndex) {\n                return values(stack).map(function (e, index) {\n                    var yVal = y(e) < 0 ? yScale(0) : yScale(y(e));\n                    return _react2.default.createElement(_Bar2.default, {\n                        key: label(stack) + '.' + index,\n                        width: xScale.rangeBand() / data.length,\n                        height: Math.abs(yScale(0) - yScale(y(e))),\n                        x: xScale(x(e)) + xScale.rangeBand() * serieIndex / data.length,\n                        y: yVal,\n                        fill: colorScale(label(stack)),\n                        data: e,\n                        onMouseEnter: onMouseEnter,\n                        onMouseLeave: onMouseLeave\n                    });\n                });\n            });\n        } else {\n            bars = data.map(function (stack) {\n                return values(stack).map(function (e, index) {\n                    var color = colorByLabel ? colorScale(label(stack)) : colorScale(x(e));\n                    var yVal = y(e) < 0 ? yScale(y0(e)) : yScale(y0(e) + y(e));\n                    return _react2.default.createElement(_Bar2.default, {\n                        key: label(stack) + '.' + index,\n                        width: xScale.rangeBand(),\n                        height: Math.abs(yScale(y0(e) + y(e)) - yScale(y0(e))),\n                        x: xScale(x(e)),\n                        y: yVal,\n                        fill: color,\n                        data: e,\n                        onMouseEnter: onMouseEnter,\n                        onMouseLeave: onMouseLeave\n                    });\n                });\n            });\n        }\n\n        return _react2.default.createElement(\n            'g',\n            null,\n            bars\n        );\n    }\n});\n\nvar BarChart = (0, _createReactClass2.default)({\n    displayName: 'BarChart',\n\n    mixins: [_DefaultPropsMixin2.default, _HeightWidthMixin2.default, _ArrayifyMixin2.default, _StackAccessorMixin2.default, _StackDataMixin2.default, _DefaultScalesMixin2.default, _TooltipMixin2.default],\n\n    getDefaultProps: function getDefaultProps() {\n        return {\n            colorByLabel: true\n        };\n    },\n    _tooltipHtml: function _tooltipHtml(d) {\n        var xScale = this._xScale;\n        var yScale = this._yScale;\n\n        var html = this.props.tooltipHtml(this.props.x(d), this.props.y0(d), this.props.y(d));\n\n        var midPoint = xScale.rangeBand() / 2;\n        var xPos = midPoint + xScale(this.props.x(d));\n\n        var topStack = this._data[this._data.length - 1].values;\n        var topElement = null;\n\n        // TODO: this might not scale if dataset is huge.\n        // consider pre-computing yPos for each X\n        for (var i = 0; i < topStack.length; i++) {\n            if (this.props.x(topStack[i]) === this.props.x(d)) {\n                topElement = topStack[i];\n                break;\n            }\n        }\n        var yPos = yScale(this.props.y0(topElement) + this.props.y(topElement));\n\n        return [html, xPos, yPos];\n    },\n    render: function render() {\n        var _props2 = this.props,\n            xAxis = _props2.xAxis,\n            yAxis = _props2.yAxis,\n            height = _props2.height,\n            width = _props2.width,\n            margin = _props2.margin,\n            viewBox = _props2.viewBox,\n            preserveAspectRatio = _props2.preserveAspectRatio,\n            colorScale = _props2.colorScale,\n            values = _props2.values,\n            label = _props2.label,\n            y = _props2.y,\n            y0 = _props2.y0,\n            x = _props2.x,\n            groupedBars = _props2.groupedBars,\n            colorByLabel = _props2.colorByLabel,\n            tickFormat = _props2.tickFormat;\n\n\n        var data = this._data;\n        var innerWidth = this._innerWidth;\n        var innerHeight = this._innerHeight;\n        var xScale = this._xScale;\n        var yScale = this._yScale;\n        var yIntercept = this._yIntercept;\n\n        return _react2.default.createElement(\n            'div',\n            null,\n            _react2.default.createElement(\n                _Chart2.default,\n                { height: height, width: width, margin: margin, viewBox: viewBox, preserveAspectRatio: preserveAspectRatio },\n                _react2.default.createElement(DataSet, {\n                    data: data,\n                    xScale: xScale,\n                    yScale: yScale,\n                    colorScale: colorScale,\n                    values: values,\n                    label: label,\n                    y: y,\n                    y0: y0,\n                    x: x,\n                    onMouseEnter: this.onMouseEnter,\n                    onMouseLeave: this.onMouseLeave,\n                    groupedBars: groupedBars,\n                    colorByLabel: colorByLabel\n                }),\n                _react2.default.createElement(_Axis2.default, _extends({\n                    className: 'x axis',\n                    orientation: 'bottom',\n                    scale: xScale,\n                    height: innerHeight,\n                    width: innerWidth,\n                    zero: yIntercept,\n                    tickFormat: tickFormat\n                }, xAxis)),\n                _react2.default.createElement(_Axis2.default, _extends({\n                    className: 'y axis',\n                    orientation: 'left',\n                    scale: yScale,\n                    height: innerHeight,\n                    width: innerWidth,\n                    tickFormat: tickFormat\n                }, yAxis)),\n                this.props.children\n            ),\n            _react2.default.createElement(_Tooltip2.default, this.state.tooltip)\n        );\n    }\n});\n\nexports.default = BarChart;"]},"metadata":{},"sourceType":"script"}