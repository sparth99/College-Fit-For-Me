{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { FinancialOverlay } from \"./FinancialOverlay\";\nimport { DependencyProperty } from \"igniteui-react-core\";\nimport { List$1 } from \"igniteui-react-core\";\nimport { Number_$type, typeCast, runOn, markType, markDep, Point_$type, fromEnum } from \"igniteui-react-core\";\nimport { CategoryFrame } from \"./CategoryFrame\";\nimport { Series } from \"./Series\";\nimport { MathUtil } from \"igniteui-react-core\";\nimport { FinancialSeriesView } from \"./FinancialSeriesView\";\nimport { ScalerParams } from \"./ScalerParams\";\nimport { ISortingAxis_$type } from \"./ISortingAxis\";\nimport { FinancialBucketCalculator } from \"./FinancialBucketCalculator\";\nimport { Polyline } from \"igniteui-react-core\";\nimport { Polygon } from \"igniteui-react-core\";\nimport { RangeValueList } from \"./RangeValueList\";\nimport { PropertyMetadata } from \"igniteui-react-core\";\nimport { truncate, isNaN_, isInfinity } from \"igniteui-react-core\";\nimport { Flattener } from \"igniteui-react-core\";\n/**\n * @hidden\n */\n\nvar PriceChannelOverlay =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(PriceChannelOverlay, _super);\n\n  function PriceChannelOverlay() {\n    var _this = _super.call(this) || this;\n\n    _this.pp = new List$1(Number_$type, 0);\n    _this.po = new List$1(Number_$type, 0);\n    _this.ab = PriceChannelOverlay.$;\n    _this.mb = new CategoryFrame(3);\n    _this.md = new CategoryFrame(3);\n    _this.ma = new CategoryFrame(3);\n    return _this;\n  }\n\n  PriceChannelOverlay.prototype.iz = function (a, b, c, d) {\n    switch (b) {\n      case \"HighColumn\":\n      case \"LowColumn\":\n        this.pi = false;\n        break;\n    }\n\n    _super.prototype.iz.call(this, a, b, c, d);\n\n    switch (b) {\n      case PriceChannelOverlay.$$p[0]:\n        this.pi = false;\n        this.jd(false);\n        break;\n    }\n  };\n\n  PriceChannelOverlay.prototype.dw = function (a, b, c) {\n    var d = _super.prototype.dw.call(this, a, b, c);\n\n    if (this.my == null || this.m0 == null) {\n      d = false;\n    }\n\n    return d;\n  };\n\n  PriceChannelOverlay.prototype.pj = function () {\n    this.pp.clear();\n    this.po.clear();\n    var a = truncate(MathUtil.b(this.pq, 0, this.bz.count));\n    var b = Math.min(this.my.count, this.m0.count);\n    var c = this.ns(this.my);\n    var d = this.ns(this.m0);\n\n    for (var e = 0; e < b; e++) {\n      var f = Math.min(a, e);\n      var g = -1.7976931348623157E+308;\n      var h = 1.7976931348623157E+308;\n\n      for (var i = 0; i < f; i++) {\n        if (!isNaN_(c.item(e - i))) {\n          g = Math.max(g, c.item(e - i));\n        }\n\n        if (!isNaN_(d.item(e - i))) {\n          h = Math.min(h, d.item(e - i));\n        }\n      }\n\n      if (e == 0) {\n        h = d.item(0);\n        g = c.item(0);\n      }\n\n      this.pp.add(g);\n      this.po.add(h);\n    }\n\n    return true;\n  };\n\n  PriceChannelOverlay.prototype.oz = function (a, b) {\n    _super.prototype.oz.call(this, a, b);\n\n    var c = b.bs;\n    var d = b.br;\n    var e = this.getEffectiveViewport1(b);\n    var f = new ScalerParams(0, c, d, this.l8.b8, e);\n    var g = new ScalerParams(0, c, d, this.mt.b8, e);\n    g.b = this.eh();\n    var h = this.l8;\n    var i = this.mt;\n    a.f.clear();\n    a.m.clear();\n    a.p.clear();\n    var j = 0;\n    var k = typeCast(ISortingAxis_$type, this.l8);\n\n    if (k != null && k.i$b.count != this.bz.count) {\n      return;\n    }\n\n    j = this.nz(c, d, e);\n\n    if (!this.pi) {\n      this.pi = this.pj();\n    }\n\n    g.b = this.eh();\n    var l = this.l8.dz(2, f) - this.l8.dz(1, f);\n\n    for (var m = b.bu.c; m <= b.bu.d; ++m) {\n      var n = void 0;\n\n      if (k == null) {\n        n = b.bu.getBucket(m);\n      } else {\n        var o = k.i$b._inner[m];\n        var p = k.i$d(o);\n        var q = this.pp._inner[m];\n        var r = this.po._inner[m];\n        var s = q;\n        var t = r;\n        var u = p;\n\n        while (m < b.bu.d) {\n          o = k.i$b._inner[m + 1];\n          u = k.i$d(o);\n\n          if (u - p > l) {\n            break;\n          }\n\n          m++;\n          s = Math.max(q, this.pp._inner[m]);\n          t = Math.min(r, this.po._inner[m]);\n        }\n\n        if (!isInfinity(t) && !isInfinity(s)) {\n          var v = NaN;\n\n          if (!isNaN_(p)) {\n            v = this.l8.dw(p, f);\n          }\n\n          n = [v, t, s];\n        } else {\n          n = [NaN, NaN, NaN];\n        }\n      }\n\n      var w = Math.max(1, l);\n\n      if (!isNaN_(n[0]) && m * w >= this.pk) {\n        if (this.l8 != null && typeCast(ISortingAxis_$type, this.l8) !== null) {\n          n[0] = n[0] + j;\n        } else {\n          n[0] = h.dw(n[0], f) + j;\n        }\n\n        n[1] = i.dw(n[1], g);\n        n[2] = i.dw(n[2], g);\n        a.f.add(n);\n      }\n    }\n  };\n\n  PriceChannelOverlay.prototype.hv = function (a, b) {\n    _super.prototype.hv.call(this, a, b);\n\n    var c = b;\n\n    if (c != null) {\n      c.b1();\n    }\n  };\n\n  PriceChannelOverlay.prototype.o1 = function (a, b) {\n    _super.prototype.o1.call(this, a, b);\n\n    var c = typeCast(PriceChannelOverlayView.$, b);\n\n    if (c == null) {\n      return;\n    }\n\n    var d = this.getEffectiveViewport1(b);\n\n    if (b.bx(a)) {\n      c.b1();\n      var e_1 = a.f.count;\n\n      var f = function (g) {\n        return a.f._inner[g][0];\n      };\n\n      var g = function (h) {\n        return a.f._inner[e_1 - 1 - h][0];\n      };\n\n      var h = function (i) {\n        return a.f._inner[i][1];\n      };\n\n      var i = function (j) {\n        return a.f._inner[e_1 - 1 - j][2];\n      };\n\n      c.b2(e_1, f, g, h, i);\n      b.bz(a);\n    }\n\n    this.mg.x(this, this.ng(), this.l8, runOn(this, this.l0), this.n5(b), this.n7(b));\n    var j = false;\n    var k = this.mg.c;\n    var l = a.f;\n    var m = this.bz.count;\n\n    if (k != null) {\n      j = true;\n    }\n\n    if (j) {\n      var n = new ScalerParams(0, b.bs, b.br, this.l8.b8, d);\n      this.oy(l, -1, m, this.l8, n, b.n);\n    }\n\n    var o = c.b8;\n    var p = c.b9;\n    var q = c.b4;\n    this.mg.ae(o, true, false, true, true);\n    this.mg.ae(p, true, false, true, true);\n    this.mg.ae(q, false, true, false, false);\n    q._opacity = this.mg.i * this.d6;\n  };\n\n  PriceChannelOverlay.prototype.bf = function () {\n    return new PriceChannelOverlayView(this);\n  };\n\n  PriceChannelOverlay.prototype.iu = function (a) {\n    _super.prototype.iu.call(this, a);\n\n    this.pn = typeCast(PriceChannelOverlayView.$, a);\n  };\n\n  PriceChannelOverlay.prototype.en = function (a, b, c) {\n    if (this.bs == null) {\n      return NaN;\n    }\n\n    var d = this.getEffectiveViewport1(this.bi);\n    var e = new ScalerParams(0, this.bs.mq, this.bi.br, this.l8.b8, d);\n    var f = this.nz(this.bs.mq, this.bi.br, d);\n    return this.ep(new RangeValueList(this.pp, this.po), a, this.l8, e, f, runOn(this, this.ny), b, c);\n  };\n\n  PriceChannelOverlay.prototype.fc = function (a, b) {\n    if (this.pp == null || this.po == null) {\n      return _super.prototype.fc.call(this, a, b);\n    }\n\n    return this.fd(a, b, this.l8, runOn(this, this.ny), new RangeValueList(this.pp, this.po));\n  };\n\n  PriceChannelOverlay.prototype.fe = function (a, b) {\n    if (this.pp == null || this.po == null) {\n      return _super.prototype.fe.call(this, a, b);\n    }\n\n    return this.ff(a, b, this.l8, runOn(this, this.ny), new RangeValueList(this.pp, this.po));\n  };\n\n  PriceChannelOverlay.prototype.eh = function () {\n    return Series.ei(this.po, null);\n  };\n\n  PriceChannelOverlay.$t = markType(PriceChannelOverlay, 'PriceChannelOverlay', FinancialOverlay.$);\n  PriceChannelOverlay.$$p = markDep(DependencyProperty, PropertyMetadata, PriceChannelOverlay, 'raisePropertyChanged', ['Period:pq:ps', [1, 14]]);\n  return PriceChannelOverlay;\n}(FinancialOverlay);\n\nexport { PriceChannelOverlay };\n/**\n * @hidden\n */\n\nvar PriceChannelBucketCalculator =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(PriceChannelBucketCalculator, _super);\n\n  function PriceChannelBucketCalculator(a) {\n    var _this = _super.call(this, a) || this;\n\n    _this.f = null;\n    _this.f = a;\n    return _this;\n  }\n\n  PriceChannelBucketCalculator.prototype.getBucket = function (a) {\n    var b = a * this.b;\n    var c = Math.min(b + this.b - 1, this.a.bw.bz.count - 1);\n\n    if (b <= c) {\n      var d = -1.7976931348623157E+308;\n      var e = 1.7976931348623157E+308;\n      var f = 0;\n\n      for (var g = b; g <= c; ++g) {\n        if (!isNaN_(this.f.b0.pp._inner[g]) && !isNaN_(this.f.b0.po._inner[g])) {\n          d = Math.max(d, this.f.b0.pp._inner[g]);\n          e = Math.min(e, this.f.b0.po._inner[g]);\n          ++f;\n        }\n      }\n\n      if (f > 0 && e != 1.7976931348623157E+308 && d != -1.7976931348623157E+308) {\n        return [0.5 * (b + c), e, d];\n      }\n    }\n\n    return [NaN, NaN, NaN];\n  };\n\n  PriceChannelBucketCalculator.$t = markType(PriceChannelBucketCalculator, 'PriceChannelBucketCalculator', FinancialBucketCalculator.$);\n  return PriceChannelBucketCalculator;\n}(FinancialBucketCalculator);\n\nexport { PriceChannelBucketCalculator };\n/**\n * @hidden\n */\n\nvar PriceChannelOverlayView =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(PriceChannelOverlayView, _super);\n\n  function PriceChannelOverlayView(a) {\n    var _this = _super.call(this, a) || this;\n\n    _this.b5 = new Polygon();\n    _this.ca = new Polyline();\n    _this.cb = new Polyline();\n    _this.b0 = null;\n    _this.b3 = new Polygon();\n    _this.b6 = new Polyline();\n    _this.b7 = new Polyline();\n    _this.b0 = a;\n    return _this;\n  }\n\n  Object.defineProperty(PriceChannelOverlayView.prototype, \"b4\", {\n    get: function () {\n      return this.b5;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PriceChannelOverlayView.prototype, \"b8\", {\n    get: function () {\n      return this.ca;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PriceChannelOverlayView.prototype, \"b9\", {\n    get: function () {\n      return this.cb;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  PriceChannelOverlayView.prototype.ap = function () {\n    _super.prototype.ap.call(this);\n\n    if (!this.n) {\n      this.e.bj = 1;\n    }\n  };\n\n  PriceChannelOverlayView.prototype.bv = function () {\n    return new PriceChannelBucketCalculator(this);\n  };\n\n  PriceChannelOverlayView.prototype.b1 = function () {\n    this.b5.ak.clear();\n    this.ca.ak.clear();\n    this.cb.ak.clear();\n    this.an();\n  };\n\n  PriceChannelOverlayView.prototype.b2 = function (a, b, c, d, e) {\n    var e_2, _a, e_3, _b;\n\n    try {\n      for (var _c = tslib_1.__values(fromEnum(Flattener.d(a, b, d, this.e.eu))), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var f = _d.value;\n        this.b5.ak.add({\n          $type: Point_$type,\n          x: b(f),\n          y: d(f)\n        });\n        this.ca.ak.add({\n          $type: Point_$type,\n          x: b(f),\n          y: d(f)\n        });\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    try {\n      for (var _e = tslib_1.__values(fromEnum(Flattener.d(a, c, e, this.e.eu))), _f = _e.next(); !_f.done; _f = _e.next()) {\n        var g = _f.value;\n        this.b5.ak.add({\n          $type: Point_$type,\n          x: c(g),\n          y: e(g)\n        });\n        this.cb.ak.add({\n          $type: Point_$type,\n          x: c(g),\n          y: e(g)\n        });\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    this.an();\n  };\n\n  PriceChannelOverlayView.prototype.a9 = function () {\n    _super.prototype.a9.call(this);\n\n    this.b3.ak = this.b5.ak;\n    this.b6.ak = this.ca.ak;\n    this.b7.ak = this.cb.ak;\n    var a = this.bl();\n    this.b3._fill = a;\n    this.b3._opacity = 1;\n    this.b6._stroke = a;\n    this.b6.ac = this.e.ey + 3;\n    this.b7._stroke = a;\n    this.b7.ac = this.e.ey + 3;\n  };\n\n  PriceChannelOverlayView.prototype.a3 = function (a, b) {\n    _super.prototype.a3.call(this, a, b);\n\n    if (a.d) {\n      if (b) {\n        a.t(this.b3);\n        a.u(this.b6);\n        a.u(this.b7);\n      } else {\n        a.t(this.b5);\n        a.u(this.ca);\n        a.u(this.cb);\n      }\n    }\n  };\n\n  PriceChannelOverlayView.prototype.ai = function (a) {\n    _super.prototype.ai.call(this, a);\n\n    this.e.a2.exportPolygonData(a, this.b5, \"fill\", [\"Fill\"]);\n    this.e.a2.exportPolylineData(a, this.ca, \"bottom\", [\"Lower\", \"Main\"]);\n    this.e.a2.exportPolylineData(a, this.cb, \"top\", [\"Upper\"]);\n  };\n\n  PriceChannelOverlayView.$t = markType(PriceChannelOverlayView, 'PriceChannelOverlayView', FinancialSeriesView.$);\n  return PriceChannelOverlayView;\n}(FinancialSeriesView);\n\nexport { PriceChannelOverlayView };","map":{"version":3,"sources":["../../../../src/igniteui-charts/lib/PriceChannelOverlay_combined.ts"],"names":[],"mappings":"AAAA;;;;;;;AAOA,SAAS,gBAAT,QAAiC,oBAAjC;AACA,SAAS,kBAAT,QAAmC,qBAAnC;AAEA,SAAS,MAAT,QAAuB,qBAAvB;AACA,SAAiH,YAAjH,EAA+H,QAA/H,EAAyI,KAAzI,EAAgJ,QAAhJ,EAA0J,OAA1J,EAA2S,WAA3S,EAAwT,QAAxT,QAAmV,qBAAnV;AAEA,SAAS,aAAT,QAA8B,iBAA9B;AACA,SAAS,MAAT,QAAuB,UAAvB;AAKA,SAAS,QAAT,QAAyB,qBAAzB;AACA,SAAS,mBAAT,QAAoC,uBAApC;AACA,SAAS,YAAT,QAA6B,gBAA7B;AAGA,SAAuB,kBAAvB,QAAiD,gBAAjD;AAEA,SAAS,yBAAT,QAA0C,6BAA1C;AAEA,SAAS,QAAT,QAAyB,qBAAzB;AACA,SAAS,OAAT,QAAwB,qBAAxB;AAKA,SAAS,cAAT,QAA+B,kBAA/B;AACA,SAAS,gBAAT,QAAiC,qBAAjC;AACA,SAAS,QAAT,EAAmB,MAAnB,EAA2B,UAA3B,QAA6C,qBAA7C;AACA,SAAS,SAAT,QAA0B,qBAA1B;AAOA;;;;AAGA,IAAA,mBAAA;AAAA;;AAAA;AAAA,UAAA,MAAA,EAAA;AAAyC,EAAA,OAAA,CAAA,SAAA,CAAA,mBAAA,EAAA,MAAA;;AAExC,WAAA,mBAAA,GAAA;AAAA,QAAA,KAAA,GACC,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADR;;AAgLA,IAAA,KAAA,CAAA,EAAA,GAAqB,IAAI,MAAJ,CAAmB,YAAnB,EAAiC,CAAjC,CAArB;AACA,IAAA,KAAA,CAAA,EAAA,GAAqB,IAAI,MAAJ,CAAmB,YAAnB,EAAiC,CAAjC,CAArB;AA/KC,IAAA,KAAI,CAAC,EAAL,GAAgB,mBAAoB,CAAC,CAArC;AACA,IAAA,KAAI,CAAC,EAAL,GAAU,IAAI,aAAJ,CAAkB,CAAlB,CAAV;AACA,IAAA,KAAI,CAAC,EAAL,GAAU,IAAI,aAAJ,CAAkB,CAAlB,CAAV;AACA,IAAA,KAAI,CAAC,EAAL,GAAU,IAAI,aAAJ,CAAkB,CAAlB,CAAV;;AACA;;AAES,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAV,UAAa,CAAb,EAAqB,CAArB,EAAgC,CAAhC,EAAwC,CAAxC,EAA8C;AAC7C,YAAQ,CAAR;AACC,WAAK,YAAL;AAEA,WAAK,WAAL;AACA,aAAK,EAAL,GAAU,KAAV;AACA;AALD;;AASA,IAAA,MAAA,CAAA,SAAA,CAAM,EAAN,CAAQ,IAAR,CAAQ,IAAR,EAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;;AACA,YAAQ,CAAR;AACC,WAAK,mBAAmB,CAAC,GAApB,CAAwB,CAAxB,CAAL;AACA,aAAK,EAAL,GAAU,KAAV;AACA,aAAK,EAAL,CAAQ,KAAR;AACA;AAJD;AAQA,GAnBS;;AAoBV,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAY,CAAZ,EAAqB,CAArB,EAAkC;AACjC,QAAI,CAAC,GAAY,MAAA,CAAA,SAAA,CAAM,EAAN,CAAQ,IAAR,CAAQ,IAAR,EAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,CAAjB;;AACA,QAAI,KAAK,EAAL,IAAW,IAAX,IAAmB,KAAK,EAAL,IAAW,IAAlC,EAAwC;AACvC,MAAA,CAAC,GAAG,KAAJ;AACA;;AACD,WAAO,CAAP;AACA,GAND;;AAOU,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAV,YAAA;AACC,SAAK,EAAL,CAAQ,KAAR;AACA,SAAK,EAAL,CAAQ,KAAR;AACA,QAAI,CAAC,GAAmB,QAAQ,CAAC,QAAQ,CAAC,CAAT,CAAW,KAAK,EAAhB,EAAoB,CAApB,EAAuB,KAAK,EAAL,CAAQ,KAA/B,CAAD,CAAhC;AACA,QAAI,CAAC,GAAW,IAAI,CAAC,GAAL,CAAS,KAAK,EAAL,CAAQ,KAAjB,EAAwB,KAAK,EAAL,CAAQ,KAAhC,CAAhB;AACA,QAAI,CAAC,GAAoB,KAAK,EAAL,CAAQ,KAAK,EAAb,CAAzB;AACA,QAAI,CAAC,GAAoB,KAAK,EAAL,CAAQ,KAAK,EAAb,CAAzB;;AACA,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,CAA5B,EAA+B,CAAC,EAAhC,EAAoC;AACnC,UAAI,CAAC,GAAW,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAZ,CAAhB;AACA,UAAI,CAAC,GAAW,CAAC,uBAAjB;AACA,UAAI,CAAC,GAAW,uBAAhB;;AACA,WAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,CAA5B,EAA+B,CAAC,EAAhC,EAAoC;AACnC,YAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAF,CAAO,CAAC,GAAG,CAAX,CAAD,CAAX,EAA4B;AAC3B,UAAA,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAC,CAAC,IAAF,CAAO,CAAC,GAAG,CAAX,CAAZ,CAAJ;AACA;;AACD,YAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAF,CAAO,CAAC,GAAG,CAAX,CAAD,CAAX,EAA4B;AAC3B,UAAA,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAC,CAAC,IAAF,CAAO,CAAC,GAAG,CAAX,CAAZ,CAAJ;AACA;AACD;;AACD,UAAI,CAAC,IAAI,CAAT,EAAY;AACX,QAAA,CAAC,GAAG,CAAC,CAAC,IAAF,CAAO,CAAP,CAAJ;AACA,QAAA,CAAC,GAAG,CAAC,CAAC,IAAF,CAAO,CAAP,CAAJ;AACA;;AACD,WAAK,EAAL,CAAQ,GAAR,CAAY,CAAZ;AACA,WAAK,EAAL,CAAQ,GAAR,CAAY,CAAZ;AACA;;AACD,WAAO,IAAP;AACA,GA3BS;;AA4BV,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAqB,CAArB,EAA2C;AAC1C,IAAA,MAAA,CAAA,SAAA,CAAM,EAAN,CAAQ,IAAR,CAAQ,IAAR,EAAS,CAAT,EAAY,CAAZ;;AACA,QAAI,CAAC,GAAS,CAAC,CAAC,EAAhB;AACA,QAAI,CAAC,GAAS,CAAC,CAAC,EAAhB;AACA,QAAI,CAAC,GAAS,KAAK,qBAAL,CAA2B,CAA3B,CAAd;AACA,QAAI,CAAC,GAAiB,IAAI,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,KAAK,EAAL,CAAQ,EAAlC,EAAsC,CAAtC,CAAtB;AACA,QAAI,CAAC,GAAiB,IAAI,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,KAAK,EAAL,CAAQ,EAAlC,EAAsC,CAAtC,CAAtB;AACA,IAAA,CAAC,CAAC,CAAF,GAAM,KAAK,EAAL,EAAN;AACA,QAAI,CAAC,GAAqB,KAAK,EAA/B;AACA,QAAI,CAAC,GAAiB,KAAK,EAA3B;AACA,IAAA,CAAC,CAAC,CAAF,CAAI,KAAJ;AACA,IAAA,CAAC,CAAC,CAAF,CAAI,KAAJ;AACA,IAAA,CAAC,CAAC,CAAF,CAAI,KAAJ;AACA,QAAI,CAAC,GAAW,CAAhB;AACA,QAAI,CAAC,GAAiB,QAAQ,CAAe,kBAAf,EAAmC,KAAK,EAAxC,CAA9B;;AACA,QAAI,CAAC,IAAI,IAAL,IAAa,CAAC,CAAC,GAAF,CAAM,KAAN,IAAe,KAAK,EAAL,CAAQ,KAAxC,EAA+C;AAC9C;AACA;;AACD,IAAA,CAAC,GAAG,KAAK,EAAL,CAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,CAAJ;;AACA,QAAI,CAAC,KAAK,EAAV,EAAc;AACb,WAAK,EAAL,GAAU,KAAK,EAAL,EAAV;AACA;;AACD,IAAA,CAAC,CAAC,CAAF,GAAM,KAAK,EAAL,EAAN;AACA,QAAI,CAAC,GAAW,KAAK,EAAL,CAAQ,EAAR,CAAW,CAAX,EAAc,CAAd,IAAmB,KAAK,EAAL,CAAQ,EAAR,CAAW,CAAX,EAAc,CAAd,CAAnC;;AACA,SAAK,IAAI,CAAC,GAAW,CAAC,CAAC,EAAF,CAAK,CAA1B,EAA6B,CAAC,IAAI,CAAC,CAAC,EAAF,CAAK,CAAvC,EAA0C,EAAE,CAA5C,EAA+C;AAC9C,UAAI,CAAC,GAAA,KAAA,CAAL;;AACA,UAAI,CAAC,IAAI,IAAT,EAAe;AACd,QAAA,CAAC,GAAG,CAAC,CAAC,EAAF,CAAK,SAAL,CAAe,CAAf,CAAJ;AACA,OAFD,MAEO;AACN,YAAI,CAAC,GAAW,CAAC,CAAC,GAAF,CAAM,MAAN,CAAa,CAAb,CAAhB;AACA,YAAI,CAAC,GAAW,CAAC,CAAC,GAAF,CAAM,CAAN,CAAhB;AACA,YAAI,CAAC,GAAW,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,CAAhB;AACA,YAAI,CAAC,GAAW,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,CAAhB;AACA,YAAI,CAAC,GAAW,CAAhB;AACA,YAAI,CAAC,GAAW,CAAhB;AACA,YAAI,CAAC,GAAW,CAAhB;;AACA,eAAO,CAAC,GAAG,CAAC,CAAC,EAAF,CAAK,CAAhB,EAAmB;AAClB,UAAA,CAAC,GAAG,CAAC,CAAC,GAAF,CAAM,MAAN,CAAa,CAAC,GAAG,CAAjB,CAAJ;AACA,UAAA,CAAC,GAAG,CAAC,CAAC,GAAF,CAAM,CAAN,CAAJ;;AACA,cAAI,CAAC,GAAG,CAAJ,GAAQ,CAAZ,EAAe;AACd;AACA;;AACD,UAAA,CAAC;AACD,UAAA,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,CAAZ,CAAJ;AACA,UAAA,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,CAAZ,CAAJ;AACA;;AACD,YAAI,CAAC,UAAU,CAAC,CAAD,CAAX,IAAkB,CAAC,UAAU,CAAC,CAAD,CAAjC,EAAsC;AACrC,cAAI,CAAC,GAAW,GAAhB;;AACA,cAAI,CAAC,MAAM,CAAC,CAAD,CAAX,EAAgB;AACf,YAAA,CAAC,GAAG,KAAK,EAAL,CAAQ,EAAR,CAAW,CAAX,EAAc,CAAd,CAAJ;AACA;;AACD,UAAA,CAAC,GAAa,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,CAAd;AACA,SAND,MAMO;AACN,UAAA,CAAC,GAAa,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,CAAd;AACA;AACD;;AACD,UAAI,CAAC,GAAW,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAZ,CAAhB;;AACA,UAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAD,CAAF,CAAP,IAAiB,CAAC,GAAG,CAAJ,IAAS,KAAK,EAAnC,EAAuC;AACtC,YAAI,KAAK,EAAL,IAAW,IAAX,IAAmB,QAAQ,CAAe,kBAAf,EAAmC,KAAK,EAAxC,CAAR,KAAwD,IAA/E,EAAqF;AACpF,UAAA,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAC,CAAD,CAAD,GAAO,CAAd;AACA,SAFD,MAEO;AACN,UAAA,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAC,EAAF,CAAK,CAAC,CAAC,CAAD,CAAN,EAAW,CAAX,IAAgB,CAAvB;AACA;;AACD,QAAA,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAC,EAAF,CAAK,CAAC,CAAC,CAAD,CAAN,EAAW,CAAX,CAAP;AACA,QAAA,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAC,EAAF,CAAK,CAAC,CAAC,CAAD,CAAN,EAAW,CAAX,CAAP;AACA,QAAA,CAAC,CAAC,CAAF,CAAI,GAAJ,CAAQ,CAAR;AACA;AACD;AACD,GApED;;AAqEA,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAe,CAAf,EAA4B;AAC3B,IAAA,MAAA,CAAA,SAAA,CAAM,EAAN,CAAQ,IAAR,CAAQ,IAAR,EAAS,CAAT,EAAY,CAAZ;;AACA,QAAI,CAAC,GAA4B,CAAjC;;AACA,QAAI,CAAC,IAAI,IAAT,EAAe;AACd,MAAA,CAAC,CAAC,EAAF;AACA;AACD,GAND;;AAOA,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAqB,CAArB,EAA2C;AAC1C,IAAA,MAAA,CAAA,SAAA,CAAM,EAAN,CAAQ,IAAR,CAAQ,IAAR,EAAS,CAAT,EAAY,CAAZ;;AACA,QAAI,CAAC,GAA4B,QAAQ,CAAgC,uBAAwB,CAAC,CAAzD,EAA4D,CAA5D,CAAzC;;AACA,QAAI,CAAC,IAAI,IAAT,EAAe;AACd;AACA;;AACD,QAAI,CAAC,GAAS,KAAK,qBAAL,CAA2B,CAA3B,CAAd;;AACA,QAAI,CAAC,CAAC,EAAF,CAAK,CAAL,CAAJ,EAAa;AACZ,MAAA,CAAC,CAAC,EAAF;AACA,UAAI,GAAC,GAAW,CAAC,CAAC,CAAF,CAAI,KAApB;;AACA,UAAI,CAAC,GAA6B,UAAC,CAAD,EAAU;AAAK,eAAQ,CAAC,CAAC,CAAF,CAAI,MAAJ,CAAW,CAAX,EAAR,CAAQ,CAAR;AAAwB,OAAzE;;AACA,UAAI,CAAC,GAA6B,UAAC,CAAD,EAAU;AAAK,eAAQ,CAAC,CAAC,CAAF,CAAI,MAAJ,CAAW,GAAC,GAAG,CAAJ,GAAQ,CAAnB,EAAR,CAAQ,CAAR;AAAgC,OAAjF;;AACA,UAAI,CAAC,GAA6B,UAAC,CAAD,EAAU;AAAK,eAAQ,CAAC,CAAC,CAAF,CAAI,MAAJ,CAAW,CAAX,EAAR,CAAQ,CAAR;AAAwB,OAAzE;;AACA,UAAI,CAAC,GAA6B,UAAC,CAAD,EAAU;AAAK,eAAQ,CAAC,CAAC,CAAF,CAAI,MAAJ,CAAW,GAAC,GAAG,CAAJ,GAAQ,CAAnB,EAAR,CAAQ,CAAR;AAAgC,OAAjF;;AACA,MAAA,CAAC,CAAC,EAAF,CAAK,GAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB;AACA,MAAA,CAAC,CAAC,EAAF,CAAK,CAAL;AACA;;AACD,SAAK,EAAL,CAAQ,CAAR,CAAU,IAAV,EAAgB,KAAK,EAAL,EAAhB,EAA2B,KAAK,EAAhC,EAAoC,KAAK,CAAC,IAAD,EAAO,KAAK,EAAZ,CAAzC,EAA0D,KAAK,EAAL,CAAQ,CAAR,CAA1D,EAAsE,KAAK,EAAL,CAAQ,CAAR,CAAtE;AACA,QAAI,CAAC,GAAY,KAAjB;AACA,QAAI,CAAC,GAAG,KAAK,EAAL,CAAQ,CAAhB;AACA,QAAI,CAAC,GAAG,CAAC,CAAC,CAAV;AACA,QAAI,CAAC,GAAG,KAAK,EAAL,CAAQ,KAAhB;;AACA,QAAI,CAAC,IAAI,IAAT,EAAe;AACd,MAAA,CAAC,GAAG,IAAJ;AACA;;AACD,QAAI,CAAJ,EAAO;AACN,UAAI,CAAC,GAAG,IAAI,YAAJ,CAAiB,CAAjB,EAAoB,CAAC,CAAC,EAAtB,EAA0B,CAAC,CAAC,EAA5B,EAAgC,KAAK,EAAL,CAAQ,EAAxC,EAA4C,CAA5C,CAAR;AACA,WAAK,EAAL,CAAQ,CAAR,EAAW,CAAC,CAAZ,EAAe,CAAf,EAAkB,KAAK,EAAvB,EAA2B,CAA3B,EAA8B,CAAC,CAAC,CAAhC;AACA;;AACD,QAAI,CAAC,GAAG,CAAC,CAAC,EAAV;AACA,QAAI,CAAC,GAAG,CAAC,CAAC,EAAV;AACA,QAAI,CAAC,GAAG,CAAC,CAAC,EAAV;AACA,SAAK,EAAL,CAAQ,EAAR,CAAW,CAAX,EAAc,IAAd,EAAoB,KAApB,EAA2B,IAA3B,EAAiC,IAAjC;AACA,SAAK,EAAL,CAAQ,EAAR,CAAW,CAAX,EAAc,IAAd,EAAoB,KAApB,EAA2B,IAA3B,EAAiC,IAAjC;AACA,SAAK,EAAL,CAAQ,EAAR,CAAW,CAAX,EAAc,KAAd,EAAqB,IAArB,EAA2B,KAA3B,EAAkC,KAAlC;AACA,IAAA,CAAC,CAAC,QAAF,GAAa,KAAK,EAAL,CAAQ,CAAR,GAAY,KAAK,EAA9B;AACA,GApCD;;AAuCU,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAV,YAAA;AACC,WAAO,IAAI,uBAAJ,CAA4B,IAA5B,CAAP;AACA,GAFS;;AAGV,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAgB;AACf,IAAA,MAAA,CAAA,SAAA,CAAM,EAAN,CAAQ,IAAR,CAAQ,IAAR,EAAS,CAAT;;AACA,SAAK,EAAL,GAAU,QAAQ,CAAgC,uBAAwB,CAAC,CAAzD,EAA4D,CAA5D,CAAlB;AACA,GAHD;;AAKA,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAa,CAAb,EAAyB,CAAzB,EAAmC;AAClC,QAAI,KAAK,EAAL,IAAW,IAAf,EAAqB;AACpB,aAAO,GAAP;AACA;;AACD,QAAI,CAAC,GAAS,KAAK,qBAAL,CAA2B,KAAK,EAAhC,CAAd;AACA,QAAI,CAAC,GAAG,IAAI,YAAJ,CAAiB,CAAjB,EAAoB,KAAK,EAAL,CAAQ,EAA5B,EAAgC,KAAK,EAAL,CAAQ,EAAxC,EAA4C,KAAK,EAAL,CAAQ,EAApD,EAAwD,CAAxD,CAAR;AACA,QAAI,CAAC,GAAG,KAAK,EAAL,CAAQ,KAAK,EAAL,CAAQ,EAAhB,EAAoB,KAAK,EAAL,CAAQ,EAA5B,EAAgC,CAAhC,CAAR;AACA,WAAO,KAAK,EAAL,CAAQ,IAAI,cAAJ,CAAmB,KAAK,EAAxB,EAA4B,KAAK,EAAjC,CAAR,EAA8C,CAA9C,EAAiD,KAAK,EAAtD,EAA0D,CAA1D,EAA6D,CAA7D,EAAgE,KAAK,CAAC,IAAD,EAAO,KAAK,EAAZ,CAArE,EAAsF,CAAtF,EAAyF,CAAzF,CAAP;AACA,GARD;;AASA,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAa,CAAb,EAAuB;AACtB,QAAI,KAAK,EAAL,IAAW,IAAX,IAAmB,KAAK,EAAL,IAAW,IAAlC,EAAwC;AACvC,aAAO,MAAA,CAAA,SAAA,CAAM,EAAN,CAAQ,IAAR,CAAQ,IAAR,EAAS,CAAT,EAAY,CAAZ,CAAP;AACA;;AACD,WAAO,KAAK,EAAL,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAK,EAAnB,EAAuB,KAAK,CAAC,IAAD,EAAO,KAAK,EAAZ,CAA5B,EAA6C,IAAI,cAAJ,CAAmB,KAAK,EAAxB,EAA4B,KAAK,EAAjC,CAA7C,CAAP;AACA,GALD;;AAMA,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAa,CAAb,EAAuB;AACtB,QAAI,KAAK,EAAL,IAAW,IAAX,IAAmB,KAAK,EAAL,IAAW,IAAlC,EAAwC;AACvC,aAAO,MAAA,CAAA,SAAA,CAAM,EAAN,CAAQ,IAAR,CAAQ,IAAR,EAAS,CAAT,EAAY,CAAZ,CAAP;AACA;;AACD,WAAO,KAAK,EAAL,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAK,EAAnB,EAAuB,KAAK,CAAC,IAAD,EAAO,KAAK,EAAZ,CAA5B,EAA6C,IAAI,cAAJ,CAAmB,KAAK,EAAxB,EAA4B,KAAK,EAAjC,CAA7C,CAAP;AACA,GALD;;AAMA,EAAA,mBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,WAAO,MAAM,CAAC,EAAP,CAAU,KAAK,EAAf,EAAmB,IAAnB,CAAP;AACA,GAFD;;AAhNO,EAAA,mBAAA,CAAA,EAAA,GAAW,QAAQ,CAAC,mBAAD,EAAsB,qBAAtB,EAAmD,gBAAiB,CAAC,CAArE,CAAnB;AAmNA,EAAA,mBAAA,CAAA,GAAA,GAAgB,OAAO,CAAC,kBAAD,EAAqB,gBAArB,EAAuC,mBAAvC,EAA4D,sBAA5D,EAAoF,CAAE,cAAF,EAAkB,CAAE,CAAF,EAAK,EAAL,CAAlB,CAApF,CAAvB;AACR,SAAA,mBAAA;AAAC,CArND,CAAyC,gBAAzC,CAAA;;SAAa,mB;AAuNb;;;;AAGA,IAAA,4BAAA;AAAA;;AAAA;AAAA,UAAA,MAAA,EAAA;AAAkD,EAAA,OAAA,CAAA,SAAA,CAAA,4BAAA,EAAA,MAAA;;AAEjD,WAAA,4BAAA,CAAY,CAAZ,EAAkC;AAAlC,QAAA,KAAA,GACC,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,CAAN,KAAQ,IADT;;AAIU,IAAA,KAAA,CAAA,CAAA,GAA6B,IAA7B;AAFT,IAAA,KAAI,CAAC,CAAL,GAAkC,CAAlC;;AACA;;AAED,EAAA,4BAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,CAAV,EAAmB;AAClB,QAAI,CAAC,GAAW,CAAC,GAAG,KAAK,CAAzB;AACA,QAAI,CAAC,GAAW,IAAI,CAAC,GAAL,CAAS,CAAC,GAAG,KAAK,CAAT,GAAa,CAAtB,EAAyB,KAAK,CAAL,CAAO,EAAP,CAAU,EAAV,CAAa,KAAb,GAAqB,CAA9C,CAAhB;;AACA,QAAI,CAAC,IAAI,CAAT,EAAY;AACX,UAAI,CAAC,GAAW,CAAC,uBAAjB;AACA,UAAI,CAAC,GAAW,uBAAhB;AACA,UAAI,CAAC,GAAW,CAAhB;;AACA,WAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,IAAI,CAA7B,EAAgC,EAAE,CAAlC,EAAqC;AACpC,YAAI,CAAC,MAAM,CAAC,KAAK,CAAL,CAAO,EAAP,CAAU,EAAV,CAAa,MAAb,CAAoB,CAApB,CAAD,CAAP,IAAmC,CAAC,MAAM,CAAC,KAAK,CAAL,CAAO,EAAP,CAAU,EAAV,CAAa,MAAb,CAAoB,CAApB,CAAD,CAA9C,EAAwE;AACvE,UAAA,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,KAAK,CAAL,CAAO,EAAP,CAAU,EAAV,CAAa,MAAb,CAAoB,CAApB,CAAZ,CAAJ;AACA,UAAA,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,KAAK,CAAL,CAAO,EAAP,CAAU,EAAV,CAAa,MAAb,CAAoB,CAApB,CAAZ,CAAJ;AACA,YAAE,CAAF;AACA;AACD;;AACD,UAAI,CAAC,GAAG,CAAJ,IAAS,CAAC,IAAI,uBAAd,IAAyC,CAAC,IAAI,CAAC,uBAAnD,EAA4E;AAC3E,eAAiB,CAAE,OAAO,CAAC,GAAG,CAAX,CAAF,EAAiB,CAAjB,EAAoB,CAApB,CAAjB;AACA;AACD;;AACD,WAAiB,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,CAAjB;AACA,GAnBD;;AANO,EAAA,4BAAA,CAAA,EAAA,GAAW,QAAQ,CAAC,4BAAD,EAA+B,8BAA/B,EAAqE,yBAA0B,CAAC,CAAhG,CAAnB;AA0BR,SAAA,4BAAA;AAAC,CA3BD,CAAkD,yBAAlD,CAAA;;SAAa,4B;AA6Bb;;;;AAGA,IAAA,uBAAA;AAAA;;AAAA;AAAA,UAAA,MAAA,EAAA;AAA6C,EAAA,OAAA,CAAA,SAAA,CAAA,uBAAA,EAAA,MAAA;;AAe5C,WAAA,uBAAA,CAAY,CAAZ,EAAkC;AAAlC,QAAA,KAAA,GACC,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,CAAN,KAAQ,IADT;;AAbQ,IAAA,KAAA,CAAA,EAAA,GAAc,IAAI,OAAJ,EAAd;AACA,IAAA,KAAA,CAAA,EAAA,GAAe,IAAI,QAAJ,EAAf;AACA,IAAA,KAAA,CAAA,EAAA,GAAe,IAAI,QAAJ,EAAf;AAUR,IAAA,KAAA,CAAA,EAAA,GAA0B,IAA1B;AA+BQ,IAAA,KAAA,CAAA,EAAA,GAAc,IAAI,OAAJ,EAAd;AACA,IAAA,KAAA,CAAA,EAAA,GAAe,IAAI,QAAJ,EAAf;AACA,IAAA,KAAA,CAAA,EAAA,GAAe,IAAI,QAAJ,EAAf;AA9BP,IAAA,KAAI,CAAC,EAAL,GAAU,CAAV;;AACA;;AAbD,EAAA,MAAA,CAAA,cAAA,CAAI,uBAAA,CAAA,SAAJ,EAAI,IAAJ,EAAM;SAAN,YAAA;AACC,aAAO,KAAK,EAAZ;AACA,KAFK;oBAAA;;AAAA,GAAN;AAGA,EAAA,MAAA,CAAA,cAAA,CAAI,uBAAA,CAAA,SAAJ,EAAI,IAAJ,EAAM;SAAN,YAAA;AACC,aAAO,KAAK,EAAZ;AACA,KAFK;oBAAA;;AAAA,GAAN;AAGA,EAAA,MAAA,CAAA,cAAA,CAAI,uBAAA,CAAA,SAAJ,EAAI,IAAJ,EAAM;SAAN,YAAA;AACC,aAAO,KAAK,EAAZ;AACA,KAFK;oBAAA;;AAAA,GAAN;;AAQA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,IAAA,MAAA,CAAA,SAAA,CAAM,EAAN,CAAQ,IAAR,CAAQ,IAAR;;AACA,QAAI,CAAC,KAAK,CAAV,EAAa;AACZ,WAAK,CAAL,CAAO,EAAP,GAAY,CAAZ;AACA;AACD,GALD;;AAMU,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,GAAV,YAAA;AACC,WAAO,IAAI,4BAAJ,CAAiC,IAAjC,CAAP;AACA,GAFS;;AAGV,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,SAAK,EAAL,CAAQ,EAAR,CAAW,KAAX;AACA,SAAK,EAAL,CAAQ,EAAR,CAAW,KAAX;AACA,SAAK,EAAL,CAAQ,EAAR,CAAW,KAAX;AACA,SAAK,EAAL;AACA,GALD;;AAMA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAc,CAAd,EAA2C,CAA3C,EAAwE,CAAxE,EAAqG,CAArG,EAAgI;;;;AAC/H,WAAc,IAAA,EAAA,GAAA,OAAA,CAAA,QAAA,CAAA,QAAQ,CAAS,SAAS,CAAC,CAAV,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,EAAqB,KAAK,CAAL,CAAO,EAA5B,CAAT,CAAR,CAAA,EAAiD,EAAA,GAAA,EAAA,CAAA,IAAA,EAA/D,EAA+D,CAAA,EAAA,CAAA,IAA/D,EAA+D,EAAA,GAAA,EAAA,CAAA,IAAA,EAA/D,EAAiE;AAA5D,YAAI,CAAC,GAAA,EAAA,CAAA,KAAL;AACJ,aAAK,EAAL,CAAQ,EAAR,CAAW,GAAX,CAAsB;AAAE,UAAA,KAAK,EAAE,WAAT;AAAsB,UAAA,CAAC,EAAE,CAAC,CAAC,CAAD,CAA1B;AAA+B,UAAA,CAAC,EAAE,CAAC,CAAC,CAAD;AAAnC,SAAtB;AACA,aAAK,EAAL,CAAQ,EAAR,CAAW,GAAX,CAAsB;AAAE,UAAA,KAAK,EAAE,WAAT;AAAsB,UAAA,CAAC,EAAE,CAAC,CAAC,CAAD,CAA1B;AAA+B,UAAA,CAAC,EAAE,CAAC,CAAC,CAAD;AAAnC,SAAtB;AACA;;;;;;;;gBACa;AAAT,YAAI,GAAJ,EACA,MAAM,GAAC,CAAG,KAAV;AACJ;AACA;;;;;;;;;;;;;;;;;AACG,MAAA,GAAG,GAAG;AAAA,QAAA,KAAA,EAAA;AAAA,OAAN;AACJ,K,SAID;AACC,UAAA;AACQ,YAAE,EAAG,IAAK,CAAA,EAAG,CAAA,IAAX,KAAc,EAAA,GAAA,EAAA,CAAA,MAAd,CAAF,EACE,EAAG,CAAA,IAAH,CAAU,EAAV;AACL,OAHL,SAImB;AACX,YAAA,GAAA,EACA,MAAQ,GAAK,CAAA,KAAb;AACH;AACL;;AACA,SAAK,EAAL;AACA,GAzBD;;AA0BA,EAAA,uBAAC,CAAA,SAAD,CAAC,EAAD,GAAC,YAAA;AACS,IAAA,MAAA,CAAA,SAAA,CAAA,EAAA,CAAA,IAAA,CAAV,IAAU;;AACT,SAAA,EAAA,CAAA,EAAA,GAAA,KAAM,EAAN,CAAQ,EAAR;AACA,SAAK,EAAL,CAAO,EAAP,GAAS,KAAA,EAAA,CAAA,EAAT;AACC,SAAA,EAAA,CAAI,EAAJ,GAAO,KAAA,EAAA,CAAA,EAAP;YACC,KAAI,EAAJ,E;YACA,K,GAAQ,C;YACR,Q,GAAW,C;SACX,E,CAAA,O,GAAA,C;YAAM,E,GAAA,KAAA,CAAA,CAAA,EAAA,GAAA,C;YACN,O,GAAS,C;YACT,E,GAAI,KAAK,CAAL,CAAQ,EAAR,GAAS,C;AACb,GAXH;;AAYG,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAA,CAAA,EAAA,CAAA,EAAA;AACD,IAAA,MAAA,CAAA,SAAA,CAAA,EAAA,CAAA,IAAA,CAAA,IAAA,EAAA,CAAA,EAAA,CAAA;;AACD,QAAA,CAAA,CAAA,CAAA,EAAA;AACD,UAAA,CAAA,EAAA;AACC,QAAA,CAAA,CAAA,CAAA,CAAA,KAAM,EAAN;AACO,QAAA,CAAE,CAAC,CAAH,CAAG,KAAA,EAAH;AACA,QAAA,CAAE,CAAC,CAAH,CAAG,KAAA,EAAH;AACF,OAJN,MAKC;AA/EM,QAAA,CAAA,CAAA,CAAA,CAAA,KAAA,EAAA;AAgFR,QAAA,CAAA,CAAA,CAAA,CAAA,KAAA,EAAA;AAjF6C,QAAA,CAAA,CAAA,CAAA,CAAA,KAiF5C,EAjF4C;AAAhC;;GAwET;;;;;;;;;;;;CAxEJ,C,mBAAA,CAAA","sourceRoot":"","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { FinancialOverlay } from \"./FinancialOverlay\";\nimport { DependencyProperty } from \"igniteui-react-core\";\nimport { List$1 } from \"igniteui-react-core\";\nimport { Number_$type, typeCast, runOn, markType, markDep, Point_$type, fromEnum } from \"igniteui-react-core\";\nimport { CategoryFrame } from \"./CategoryFrame\";\nimport { Series } from \"./Series\";\nimport { MathUtil } from \"igniteui-react-core\";\nimport { FinancialSeriesView } from \"./FinancialSeriesView\";\nimport { ScalerParams } from \"./ScalerParams\";\nimport { ISortingAxis_$type } from \"./ISortingAxis\";\nimport { FinancialBucketCalculator } from \"./FinancialBucketCalculator\";\nimport { Polyline } from \"igniteui-react-core\";\nimport { Polygon } from \"igniteui-react-core\";\nimport { RangeValueList } from \"./RangeValueList\";\nimport { PropertyMetadata } from \"igniteui-react-core\";\nimport { truncate, isNaN_, isInfinity } from \"igniteui-react-core\";\nimport { Flattener } from \"igniteui-react-core\";\n/**\n * @hidden\n */\nvar PriceChannelOverlay = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(PriceChannelOverlay, _super);\n    function PriceChannelOverlay() {\n        var _this = _super.call(this) || this;\n        _this.pp = new List$1(Number_$type, 0);\n        _this.po = new List$1(Number_$type, 0);\n        _this.ab = PriceChannelOverlay.$;\n        _this.mb = new CategoryFrame(3);\n        _this.md = new CategoryFrame(3);\n        _this.ma = new CategoryFrame(3);\n        return _this;\n    }\n    PriceChannelOverlay.prototype.iz = function (a, b, c, d) {\n        switch (b) {\n            case \"HighColumn\":\n            case \"LowColumn\":\n                this.pi = false;\n                break;\n        }\n        _super.prototype.iz.call(this, a, b, c, d);\n        switch (b) {\n            case PriceChannelOverlay.$$p[0]:\n                this.pi = false;\n                this.jd(false);\n                break;\n        }\n    };\n    PriceChannelOverlay.prototype.dw = function (a, b, c) {\n        var d = _super.prototype.dw.call(this, a, b, c);\n        if (this.my == null || this.m0 == null) {\n            d = false;\n        }\n        return d;\n    };\n    PriceChannelOverlay.prototype.pj = function () {\n        this.pp.clear();\n        this.po.clear();\n        var a = truncate(MathUtil.b(this.pq, 0, this.bz.count));\n        var b = Math.min(this.my.count, this.m0.count);\n        var c = this.ns(this.my);\n        var d = this.ns(this.m0);\n        for (var e = 0; e < b; e++) {\n            var f = Math.min(a, e);\n            var g = -1.7976931348623157E+308;\n            var h = 1.7976931348623157E+308;\n            for (var i = 0; i < f; i++) {\n                if (!isNaN_(c.item(e - i))) {\n                    g = Math.max(g, c.item(e - i));\n                }\n                if (!isNaN_(d.item(e - i))) {\n                    h = Math.min(h, d.item(e - i));\n                }\n            }\n            if (e == 0) {\n                h = d.item(0);\n                g = c.item(0);\n            }\n            this.pp.add(g);\n            this.po.add(h);\n        }\n        return true;\n    };\n    PriceChannelOverlay.prototype.oz = function (a, b) {\n        _super.prototype.oz.call(this, a, b);\n        var c = b.bs;\n        var d = b.br;\n        var e = this.getEffectiveViewport1(b);\n        var f = new ScalerParams(0, c, d, this.l8.b8, e);\n        var g = new ScalerParams(0, c, d, this.mt.b8, e);\n        g.b = this.eh();\n        var h = this.l8;\n        var i = this.mt;\n        a.f.clear();\n        a.m.clear();\n        a.p.clear();\n        var j = 0;\n        var k = typeCast(ISortingAxis_$type, this.l8);\n        if (k != null && k.i$b.count != this.bz.count) {\n            return;\n        }\n        j = this.nz(c, d, e);\n        if (!this.pi) {\n            this.pi = this.pj();\n        }\n        g.b = this.eh();\n        var l = this.l8.dz(2, f) - this.l8.dz(1, f);\n        for (var m = b.bu.c; m <= b.bu.d; ++m) {\n            var n = void 0;\n            if (k == null) {\n                n = b.bu.getBucket(m);\n            }\n            else {\n                var o = k.i$b._inner[m];\n                var p = k.i$d(o);\n                var q = this.pp._inner[m];\n                var r = this.po._inner[m];\n                var s = q;\n                var t = r;\n                var u = p;\n                while (m < b.bu.d) {\n                    o = k.i$b._inner[m + 1];\n                    u = k.i$d(o);\n                    if (u - p > l) {\n                        break;\n                    }\n                    m++;\n                    s = Math.max(q, this.pp._inner[m]);\n                    t = Math.min(r, this.po._inner[m]);\n                }\n                if (!isInfinity(t) && !isInfinity(s)) {\n                    var v = NaN;\n                    if (!isNaN_(p)) {\n                        v = this.l8.dw(p, f);\n                    }\n                    n = [v, t, s];\n                }\n                else {\n                    n = [NaN, NaN, NaN];\n                }\n            }\n            var w = Math.max(1, l);\n            if (!isNaN_(n[0]) && m * w >= this.pk) {\n                if (this.l8 != null && typeCast(ISortingAxis_$type, this.l8) !== null) {\n                    n[0] = n[0] + j;\n                }\n                else {\n                    n[0] = h.dw(n[0], f) + j;\n                }\n                n[1] = i.dw(n[1], g);\n                n[2] = i.dw(n[2], g);\n                a.f.add(n);\n            }\n        }\n    };\n    PriceChannelOverlay.prototype.hv = function (a, b) {\n        _super.prototype.hv.call(this, a, b);\n        var c = b;\n        if (c != null) {\n            c.b1();\n        }\n    };\n    PriceChannelOverlay.prototype.o1 = function (a, b) {\n        _super.prototype.o1.call(this, a, b);\n        var c = typeCast(PriceChannelOverlayView.$, b);\n        if (c == null) {\n            return;\n        }\n        var d = this.getEffectiveViewport1(b);\n        if (b.bx(a)) {\n            c.b1();\n            var e_1 = a.f.count;\n            var f = function (g) { return a.f._inner[g][0]; };\n            var g = function (h) { return a.f._inner[e_1 - 1 - h][0]; };\n            var h = function (i) { return a.f._inner[i][1]; };\n            var i = function (j) { return a.f._inner[e_1 - 1 - j][2]; };\n            c.b2(e_1, f, g, h, i);\n            b.bz(a);\n        }\n        this.mg.x(this, this.ng(), this.l8, runOn(this, this.l0), this.n5(b), this.n7(b));\n        var j = false;\n        var k = this.mg.c;\n        var l = a.f;\n        var m = this.bz.count;\n        if (k != null) {\n            j = true;\n        }\n        if (j) {\n            var n = new ScalerParams(0, b.bs, b.br, this.l8.b8, d);\n            this.oy(l, -1, m, this.l8, n, b.n);\n        }\n        var o = c.b8;\n        var p = c.b9;\n        var q = c.b4;\n        this.mg.ae(o, true, false, true, true);\n        this.mg.ae(p, true, false, true, true);\n        this.mg.ae(q, false, true, false, false);\n        q._opacity = this.mg.i * this.d6;\n    };\n    PriceChannelOverlay.prototype.bf = function () {\n        return new PriceChannelOverlayView(this);\n    };\n    PriceChannelOverlay.prototype.iu = function (a) {\n        _super.prototype.iu.call(this, a);\n        this.pn = typeCast(PriceChannelOverlayView.$, a);\n    };\n    PriceChannelOverlay.prototype.en = function (a, b, c) {\n        if (this.bs == null) {\n            return NaN;\n        }\n        var d = this.getEffectiveViewport1(this.bi);\n        var e = new ScalerParams(0, this.bs.mq, this.bi.br, this.l8.b8, d);\n        var f = this.nz(this.bs.mq, this.bi.br, d);\n        return this.ep(new RangeValueList(this.pp, this.po), a, this.l8, e, f, runOn(this, this.ny), b, c);\n    };\n    PriceChannelOverlay.prototype.fc = function (a, b) {\n        if (this.pp == null || this.po == null) {\n            return _super.prototype.fc.call(this, a, b);\n        }\n        return this.fd(a, b, this.l8, runOn(this, this.ny), new RangeValueList(this.pp, this.po));\n    };\n    PriceChannelOverlay.prototype.fe = function (a, b) {\n        if (this.pp == null || this.po == null) {\n            return _super.prototype.fe.call(this, a, b);\n        }\n        return this.ff(a, b, this.l8, runOn(this, this.ny), new RangeValueList(this.pp, this.po));\n    };\n    PriceChannelOverlay.prototype.eh = function () {\n        return Series.ei(this.po, null);\n    };\n    PriceChannelOverlay.$t = markType(PriceChannelOverlay, 'PriceChannelOverlay', FinancialOverlay.$);\n    PriceChannelOverlay.$$p = markDep(DependencyProperty, PropertyMetadata, PriceChannelOverlay, 'raisePropertyChanged', ['Period:pq:ps', [1, 14]]);\n    return PriceChannelOverlay;\n}(FinancialOverlay));\nexport { PriceChannelOverlay };\n/**\n * @hidden\n */\nvar PriceChannelBucketCalculator = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(PriceChannelBucketCalculator, _super);\n    function PriceChannelBucketCalculator(a) {\n        var _this = _super.call(this, a) || this;\n        _this.f = null;\n        _this.f = a;\n        return _this;\n    }\n    PriceChannelBucketCalculator.prototype.getBucket = function (a) {\n        var b = a * this.b;\n        var c = Math.min(b + this.b - 1, this.a.bw.bz.count - 1);\n        if (b <= c) {\n            var d = -1.7976931348623157E+308;\n            var e = 1.7976931348623157E+308;\n            var f = 0;\n            for (var g = b; g <= c; ++g) {\n                if (!isNaN_(this.f.b0.pp._inner[g]) && !isNaN_(this.f.b0.po._inner[g])) {\n                    d = Math.max(d, this.f.b0.pp._inner[g]);\n                    e = Math.min(e, this.f.b0.po._inner[g]);\n                    ++f;\n                }\n            }\n            if (f > 0 && e != 1.7976931348623157E+308 && d != -1.7976931348623157E+308) {\n                return [0.5 * (b + c), e, d];\n            }\n        }\n        return [NaN, NaN, NaN];\n    };\n    PriceChannelBucketCalculator.$t = markType(PriceChannelBucketCalculator, 'PriceChannelBucketCalculator', FinancialBucketCalculator.$);\n    return PriceChannelBucketCalculator;\n}(FinancialBucketCalculator));\nexport { PriceChannelBucketCalculator };\n/**\n * @hidden\n */\nvar PriceChannelOverlayView = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(PriceChannelOverlayView, _super);\n    function PriceChannelOverlayView(a) {\n        var _this = _super.call(this, a) || this;\n        _this.b5 = new Polygon();\n        _this.ca = new Polyline();\n        _this.cb = new Polyline();\n        _this.b0 = null;\n        _this.b3 = new Polygon();\n        _this.b6 = new Polyline();\n        _this.b7 = new Polyline();\n        _this.b0 = a;\n        return _this;\n    }\n    Object.defineProperty(PriceChannelOverlayView.prototype, \"b4\", {\n        get: function () {\n            return this.b5;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PriceChannelOverlayView.prototype, \"b8\", {\n        get: function () {\n            return this.ca;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PriceChannelOverlayView.prototype, \"b9\", {\n        get: function () {\n            return this.cb;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PriceChannelOverlayView.prototype.ap = function () {\n        _super.prototype.ap.call(this);\n        if (!this.n) {\n            this.e.bj = 1;\n        }\n    };\n    PriceChannelOverlayView.prototype.bv = function () {\n        return new PriceChannelBucketCalculator(this);\n    };\n    PriceChannelOverlayView.prototype.b1 = function () {\n        this.b5.ak.clear();\n        this.ca.ak.clear();\n        this.cb.ak.clear();\n        this.an();\n    };\n    PriceChannelOverlayView.prototype.b2 = function (a, b, c, d, e) {\n        var e_2, _a, e_3, _b;\n        try {\n            for (var _c = tslib_1.__values(fromEnum(Flattener.d(a, b, d, this.e.eu))), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var f = _d.value;\n                this.b5.ak.add({ $type: Point_$type, x: b(f), y: d(f) });\n                this.ca.ak.add({ $type: Point_$type, x: b(f), y: d(f) });\n            }\n        }\n        catch (e_2_1) {\n            e_2 = { error: e_2_1 };\n        }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return))\n                    _a.call(_c);\n            }\n            finally {\n                if (e_2)\n                    throw e_2.error;\n            }\n        }\n        try {\n            for (var _e = tslib_1.__values(fromEnum(Flattener.d(a, c, e, this.e.eu))), _f = _e.next(); !_f.done; _f = _e.next()) {\n                var g = _f.value;\n                this.b5.ak.add({ $type: Point_$type, x: c(g), y: e(g) });\n                this.cb.ak.add({ $type: Point_$type, x: c(g), y: e(g) });\n            }\n        }\n        catch (e_3_1) {\n            e_3 = { error: e_3_1 };\n        }\n        finally {\n            try {\n                if (_f && !_f.done && (_b = _e.return))\n                    _b.call(_e);\n            }\n            finally {\n                if (e_3)\n                    throw e_3.error;\n            }\n        }\n        this.an();\n    };\n    PriceChannelOverlayView.prototype.a9 = function () {\n        _super.prototype.a9.call(this);\n        this.b3.ak = this.b5.ak;\n        this.b6.ak = this.ca.ak;\n        this.b7.ak = this.cb.ak;\n        var a = this.bl();\n        this.b3._fill = a;\n        this.b3._opacity = 1;\n        this.b6._stroke = a;\n        this.b6.ac = this.e.ey + 3;\n        this.b7._stroke = a;\n        this.b7.ac = this.e.ey + 3;\n    };\n    PriceChannelOverlayView.prototype.a3 = function (a, b) {\n        _super.prototype.a3.call(this, a, b);\n        if (a.d) {\n            if (b) {\n                a.t(this.b3);\n                a.u(this.b6);\n                a.u(this.b7);\n            }\n            else {\n                a.t(this.b5);\n                a.u(this.ca);\n                a.u(this.cb);\n            }\n        }\n    };\n    PriceChannelOverlayView.prototype.ai = function (a) {\n        _super.prototype.ai.call(this, a);\n        this.e.a2.exportPolygonData(a, this.b5, \"fill\", [\"Fill\"]);\n        this.e.a2.exportPolylineData(a, this.ca, \"bottom\", [\"Lower\", \"Main\"]);\n        this.e.a2.exportPolylineData(a, this.cb, \"top\", [\"Upper\"]);\n    };\n    PriceChannelOverlayView.$t = markType(PriceChannelOverlayView, 'PriceChannelOverlayView', FinancialSeriesView.$);\n    return PriceChannelOverlayView;\n}(FinancialSeriesView));\nexport { PriceChannelOverlayView };\n//# sourceMappingURL=PriceChannelOverlay_combined.js.map\n"]},"metadata":{},"sourceType":"module"}