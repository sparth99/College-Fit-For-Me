{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d = require('d3');\n\nvar d3 = _interopRequireWildcard(_d);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar BubbleChart = function (_Component) {\n  _inherits(BubbleChart, _Component);\n\n  function BubbleChart(props) {\n    _classCallCheck(this, BubbleChart);\n\n    var _this = _possibleConstructorReturn(this, (BubbleChart.__proto__ || Object.getPrototypeOf(BubbleChart)).call(this, props));\n\n    _this.renderChart = _this.renderChart.bind(_this);\n    _this.renderBubbles = _this.renderBubbles.bind(_this);\n    _this.renderLegend = _this.renderLegend.bind(_this);\n    return _this;\n  }\n\n  _createClass(BubbleChart, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.svg = _reactDom2.default.findDOMNode(this);\n      this.renderChart();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var _props = this.props,\n          width = _props.width,\n          height = _props.height;\n\n      if (width !== 0 && height !== 0) {\n        this.renderChart();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props2 = this.props,\n          width = _props2.width,\n          height = _props2.height;\n      return _react2.default.createElement('svg', {\n        width: width,\n        height: height\n      });\n    }\n  }, {\n    key: 'renderChart',\n    value: function renderChart() {\n      var _props3 = this.props,\n          graph = _props3.graph,\n          data = _props3.data,\n          height = _props3.height,\n          width = _props3.width,\n          padding = _props3.padding,\n          showLegend = _props3.showLegend,\n          legendPercentage = _props3.legendPercentage; // Reset the svg element to a empty state.\n\n      this.svg.innerHTML = '';\n      var bubblesWidth = showLegend ? width * (1 - legendPercentage / 100) : width;\n      var legendWidth = width - bubblesWidth;\n      var color = d3.scaleOrdinal(d3.schemeCategory20c);\n      var pack = d3.pack().size([bubblesWidth * graph.zoom, bubblesWidth * graph.zoom]).padding(padding); // Process the data to have a hierarchy structure;\n\n      var root = d3.hierarchy({\n        children: data\n      }).sum(function (d) {\n        return d.value;\n      }).sort(function (a, b) {\n        return b.value - a.value;\n      }).each(function (d) {\n        if (d.data.label) {\n          d.label = d.data.label;\n          d.id = d.data.label.toLowerCase().replace(/ |\\//g, \"-\");\n        }\n      }); // Pass the data to the pack layout to calculate the distribution.\n\n      var nodes = pack(root).leaves(); // Call to the function that draw the bubbles.\n\n      this.renderBubbles(bubblesWidth, nodes, color); // Call to the function that draw the legend.\n\n      if (showLegend) {\n        this.renderLegend(legendWidth, height, bubblesWidth, nodes, color);\n      }\n    }\n  }, {\n    key: 'renderBubbles',\n    value: function renderBubbles(width, nodes, color) {\n      var _props4 = this.props,\n          graph = _props4.graph,\n          data = _props4.data,\n          bubbleClickFun = _props4.bubbleClickFun,\n          valueFont = _props4.valueFont,\n          labelFont = _props4.labelFont;\n      var bubbleChart = d3.select(this.svg).append(\"g\").attr(\"class\", \"bubble-chart\").attr(\"transform\", function (d) {\n        return \"translate(\" + width * graph.offsetX + \",\" + width * graph.offsetY + \")\";\n      });\n      ;\n      var node = bubbleChart.selectAll(\".node\").data(nodes).enter().append(\"g\").attr(\"class\", \"node\").attr(\"transform\", function (d) {\n        return \"translate(\" + d.x + \",\" + d.y + \")\";\n      }).on(\"click\", function (d) {\n        bubbleClickFun(d.label);\n      });\n      node.append(\"circle\").attr(\"id\", function (d) {\n        return d.id;\n      }).attr(\"r\", function (d) {\n        return d.r - d.r * .04;\n      }).style(\"fill\", function (d) {\n        return d.data.color ? d.data.color : color(nodes.indexOf(d));\n      }).style(\"z-index\", 1).on('mouseover', function (d) {\n        d3.select(this).attr(\"r\", d.r * 1.04);\n      }).on('mouseout', function (d) {\n        var r = d.r - d.r * 0.04;\n        d3.select(this).attr(\"r\", r);\n      });\n      node.append(\"clipPath\").attr(\"id\", function (d) {\n        return \"clip-\" + d.id;\n      }).append(\"use\").attr(\"xlink:href\", function (d) {\n        return \"#\" + d.id;\n      });\n      node.append(\"text\").attr(\"class\", \"value-text\").style(\"font-size\", valueFont.size + 'px').attr(\"clip-path\", function (d) {\n        return \"url(#clip-\" + d.id + \")\";\n      }).style(\"font-weight\", function (d) {\n        return valueFont.weight ? valueFont.weight : 600;\n      }).style(\"font-family\", valueFont.family).style(\"fill\", function () {\n        return valueFont.color ? valueFont.color : '#000';\n      }).style(\"stroke\", function () {\n        return valueFont.lineColor ? valueFont.lineColor : '#000';\n      }).style(\"stroke-width\", function () {\n        return valueFont.lineWeight ? valueFont.lineWeight : 0;\n      }).text(function (d) {\n        return d.value;\n      });\n      node.append(\"text\").attr(\"class\", \"label-text\").style(\"font-size\", labelFont.size + 'px').attr(\"clip-path\", function (d) {\n        return \"url(#clip-\" + d.id + \")\";\n      }).style(\"font-weight\", function (d) {\n        return labelFont.weight ? labelFont.weight : 600;\n      }).style(\"font-family\", labelFont.family).style(\"fill\", function () {\n        return labelFont.color ? labelFont.color : '#000';\n      }).style(\"stroke\", function () {\n        return labelFont.lineColor ? labelFont.lineColor : '#000';\n      }).style(\"stroke-width\", function () {\n        return labelFont.lineWeight ? labelFont.lineWeight : 0;\n      }).text(function (d) {\n        return d.label;\n      }); // Center the texts inside the circles.\n\n      d3.selectAll(\".label-text\").attr(\"x\", function (d) {\n        var self = d3.select(this);\n        var width = self.node().getBBox().width;\n        return -(width / 2);\n      }).style(\"opacity\", function (d) {\n        var self = d3.select(this);\n        var width = self.node().getBBox().width;\n        d.hideLabel = width * 1.05 > d.r * 2;\n        return d.hideLabel ? 0 : 1;\n      }).attr(\"y\", function (d) {\n        return labelFont.size / 2;\n      }); // Center the texts inside the circles.\n\n      d3.selectAll(\".value-text\").attr(\"x\", function (d) {\n        var self = d3.select(this);\n        var width = self.node().getBBox().width;\n        return -(width / 2);\n      }).attr(\"y\", function (d) {\n        if (d.hideLabel) {\n          return valueFont.size / 3;\n        } else {\n          return -valueFont.size * 0.5;\n        }\n      });\n      node.append(\"title\").text(function (d) {\n        return d.label;\n      });\n    }\n  }, {\n    key: 'renderLegend',\n    value: function renderLegend(width, height, offset, nodes, color) {\n      var _props5 = this.props,\n          data = _props5.data,\n          legendClickFun = _props5.legendClickFun,\n          legendFont = _props5.legendFont;\n      var bubble = d3.select('.bubble-chart');\n      var bubbleHeight = bubble.node().getBBox().height;\n      var legend = d3.select(this.svg).append(\"g\").attr(\"transform\", function () {\n        return 'translate(' + offset + ',' + bubbleHeight * 0.05 + ')';\n      }).attr(\"class\", \"legend\");\n      var textOffset = 0;\n      var texts = legend.selectAll(\".legend-text\").data(nodes).enter().append(\"g\").attr(\"transform\", function (d, i) {\n        var offset = textOffset;\n        textOffset += legendFont.size + 10;\n        return 'translate(0,' + offset + ')';\n      }).on('mouseover', function (d) {\n        d3.select('#' + d.id).attr(\"r\", d.r * 1.04);\n      }).on('mouseout', function (d) {\n        var r = d.r - d.r * 0.04;\n        d3.select('#' + d.id).attr(\"r\", r);\n      }).on(\"click\", function (d) {\n        legendClickFun(d.label);\n      });\n      ;\n      texts.append(\"rect\").attr(\"width\", 30).attr(\"height\", legendFont.size).attr(\"x\", 0).attr(\"y\", -legendFont.size).style(\"fill\", \"transparent\");\n      texts.append(\"rect\").attr(\"width\", legendFont.size).attr(\"height\", legendFont.size).attr(\"x\", 0).attr(\"y\", -legendFont.size).style(\"fill\", function (d) {\n        return d.data.color ? d.data.color : color(nodes.indexOf(d));\n      });\n      texts.append(\"text\").style(\"font-size\", legendFont.size + 'px').style(\"font-weight\", function (d) {\n        return legendFont.weight ? legendFont.weight : 600;\n      }).style(\"font-family\", legendFont.family).style(\"fill\", function () {\n        return legendFont.color ? legendFont.color : '#000';\n      }).style(\"stroke\", function () {\n        return legendFont.lineColor ? legendFont.lineColor : '#000';\n      }).style(\"stroke-width\", function () {\n        return legendFont.lineWeight ? legendFont.lineWeight : 0;\n      }).attr(\"x\", function (d) {\n        return legendFont.size + 10;\n      }).attr(\"y\", 0).text(function (d) {\n        return d.label;\n      });\n    }\n  }]);\n\n  return BubbleChart;\n}(_react.Component);\n\nexports.default = BubbleChart;\nBubbleChart.propTypes = {\n  graph: _propTypes2.default.shape({\n    zoom: _propTypes2.default.number,\n    offsetX: _propTypes2.default.number,\n    offsetY: _propTypes2.default.number\n  }),\n  width: _propTypes2.default.number,\n  height: _propTypes2.default.number,\n  padding: _propTypes2.default.number,\n  showLegend: _propTypes2.default.bool,\n  legendPercentage: _propTypes2.default.number,\n  legendFont: _propTypes2.default.shape({\n    family: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    color: _propTypes2.default.string,\n    weight: _propTypes2.default.string\n  }),\n  valueFont: _propTypes2.default.shape({\n    family: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    color: _propTypes2.default.string,\n    weight: _propTypes2.default.string\n  }),\n  labelFont: _propTypes2.default.shape({\n    family: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    color: _propTypes2.default.string,\n    weight: _propTypes2.default.string\n  })\n};\nBubbleChart.defaultProps = {\n  graph: {\n    zoom: 1.1,\n    offsetX: -0.05,\n    offsetY: -0.01\n  },\n  width: 1000,\n  height: 800,\n  padding: 0,\n  showLegend: true,\n  legendPercentage: 20,\n  legendFont: {\n    family: 'Arial',\n    size: 12,\n    color: '#000',\n    weight: 'bold'\n  },\n  valueFont: {\n    family: 'Arial',\n    size: 16,\n    color: '#fff',\n    weight: 'bold'\n  },\n  labelFont: {\n    family: 'Arial',\n    size: 11,\n    color: '#fff',\n    weight: 'normal'\n  },\n  bubbleClickFun: function bubbleClickFun(label) {\n    console.log('Bubble ' + label + ' is clicked ...');\n  },\n  legendClickFun: function legendClickFun(label) {\n    console.log('Legend ' + label + ' is clicked ...');\n  }\n};","map":{"version":3,"sources":["/Users/Parth/web-project/node_modules/@weknow/react-bubble-chart-d3/lib/react-bubble-chart-d3.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_reactDom","_reactDom2","_propTypes","_propTypes2","_d","d3","_interopRequireWildcard","obj","__esModule","newObj","hasOwnProperty","call","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","BubbleChart","_Component","_this","getPrototypeOf","renderChart","bind","renderBubbles","renderLegend","componentDidMount","svg","findDOMNode","componentDidUpdate","_props","width","height","render","_props2","createElement","_props3","graph","data","padding","showLegend","legendPercentage","innerHTML","bubblesWidth","legendWidth","color","scaleOrdinal","schemeCategory20c","pack","size","zoom","root","hierarchy","children","sum","d","sort","a","b","each","label","id","toLowerCase","replace","nodes","leaves","_props4","bubbleClickFun","valueFont","labelFont","bubbleChart","select","append","attr","offsetX","offsetY","node","selectAll","enter","x","y","on","r","style","indexOf","weight","family","lineColor","lineWeight","text","getBBox","hideLabel","offset","_props5","legendClickFun","legendFont","bubble","bubbleHeight","legend","textOffset","texts","Component","propTypes","shape","number","bool","string","defaultProps","console","log"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d = require('d3');\n\nvar d3 = _interopRequireWildcard(_d);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BubbleChart = function (_Component) {\n  _inherits(BubbleChart, _Component);\n\n  function BubbleChart(props) {\n    _classCallCheck(this, BubbleChart);\n\n    var _this = _possibleConstructorReturn(this, (BubbleChart.__proto__ || Object.getPrototypeOf(BubbleChart)).call(this, props));\n\n    _this.renderChart = _this.renderChart.bind(_this);\n    _this.renderBubbles = _this.renderBubbles.bind(_this);\n    _this.renderLegend = _this.renderLegend.bind(_this);\n    return _this;\n  }\n\n  _createClass(BubbleChart, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.svg = _reactDom2.default.findDOMNode(this);\n      this.renderChart();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var _props = this.props,\n          width = _props.width,\n          height = _props.height;\n\n      if (width !== 0 && height !== 0) {\n        this.renderChart();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props2 = this.props,\n          width = _props2.width,\n          height = _props2.height;\n\n      return _react2.default.createElement('svg', { width: width, height: height });\n    }\n  }, {\n    key: 'renderChart',\n    value: function renderChart() {\n      var _props3 = this.props,\n          graph = _props3.graph,\n          data = _props3.data,\n          height = _props3.height,\n          width = _props3.width,\n          padding = _props3.padding,\n          showLegend = _props3.showLegend,\n          legendPercentage = _props3.legendPercentage;\n      // Reset the svg element to a empty state.\n\n      this.svg.innerHTML = '';\n\n      var bubblesWidth = showLegend ? width * (1 - legendPercentage / 100) : width;\n      var legendWidth = width - bubblesWidth;\n      var color = d3.scaleOrdinal(d3.schemeCategory20c);\n\n      var pack = d3.pack().size([bubblesWidth * graph.zoom, bubblesWidth * graph.zoom]).padding(padding);\n\n      // Process the data to have a hierarchy structure;\n      var root = d3.hierarchy({ children: data }).sum(function (d) {\n        return d.value;\n      }).sort(function (a, b) {\n        return b.value - a.value;\n      }).each(function (d) {\n        if (d.data.label) {\n          d.label = d.data.label;\n          d.id = d.data.label.toLowerCase().replace(/ |\\//g, \"-\");\n        }\n      });\n\n      // Pass the data to the pack layout to calculate the distribution.\n      var nodes = pack(root).leaves();\n\n      // Call to the function that draw the bubbles.\n      this.renderBubbles(bubblesWidth, nodes, color);\n      // Call to the function that draw the legend.\n      if (showLegend) {\n        this.renderLegend(legendWidth, height, bubblesWidth, nodes, color);\n      }\n    }\n  }, {\n    key: 'renderBubbles',\n    value: function renderBubbles(width, nodes, color) {\n      var _props4 = this.props,\n          graph = _props4.graph,\n          data = _props4.data,\n          bubbleClickFun = _props4.bubbleClickFun,\n          valueFont = _props4.valueFont,\n          labelFont = _props4.labelFont;\n\n\n      var bubbleChart = d3.select(this.svg).append(\"g\").attr(\"class\", \"bubble-chart\").attr(\"transform\", function (d) {\n        return \"translate(\" + width * graph.offsetX + \",\" + width * graph.offsetY + \")\";\n      });;\n\n      var node = bubbleChart.selectAll(\".node\").data(nodes).enter().append(\"g\").attr(\"class\", \"node\").attr(\"transform\", function (d) {\n        return \"translate(\" + d.x + \",\" + d.y + \")\";\n      }).on(\"click\", function (d) {\n        bubbleClickFun(d.label);\n      });\n\n      node.append(\"circle\").attr(\"id\", function (d) {\n        return d.id;\n      }).attr(\"r\", function (d) {\n        return d.r - d.r * .04;\n      }).style(\"fill\", function (d) {\n        return d.data.color ? d.data.color : color(nodes.indexOf(d));\n      }).style(\"z-index\", 1).on('mouseover', function (d) {\n        d3.select(this).attr(\"r\", d.r * 1.04);\n      }).on('mouseout', function (d) {\n        var r = d.r - d.r * 0.04;\n        d3.select(this).attr(\"r\", r);\n      });\n\n      node.append(\"clipPath\").attr(\"id\", function (d) {\n        return \"clip-\" + d.id;\n      }).append(\"use\").attr(\"xlink:href\", function (d) {\n        return \"#\" + d.id;\n      });\n\n      node.append(\"text\").attr(\"class\", \"value-text\").style(\"font-size\", valueFont.size + 'px').attr(\"clip-path\", function (d) {\n        return \"url(#clip-\" + d.id + \")\";\n      }).style(\"font-weight\", function (d) {\n        return valueFont.weight ? valueFont.weight : 600;\n      }).style(\"font-family\", valueFont.family).style(\"fill\", function () {\n        return valueFont.color ? valueFont.color : '#000';\n      }).style(\"stroke\", function () {\n        return valueFont.lineColor ? valueFont.lineColor : '#000';\n      }).style(\"stroke-width\", function () {\n        return valueFont.lineWeight ? valueFont.lineWeight : 0;\n      }).text(function (d) {\n        return d.value;\n      });\n\n      node.append(\"text\").attr(\"class\", \"label-text\").style(\"font-size\", labelFont.size + 'px').attr(\"clip-path\", function (d) {\n        return \"url(#clip-\" + d.id + \")\";\n      }).style(\"font-weight\", function (d) {\n        return labelFont.weight ? labelFont.weight : 600;\n      }).style(\"font-family\", labelFont.family).style(\"fill\", function () {\n        return labelFont.color ? labelFont.color : '#000';\n      }).style(\"stroke\", function () {\n        return labelFont.lineColor ? labelFont.lineColor : '#000';\n      }).style(\"stroke-width\", function () {\n        return labelFont.lineWeight ? labelFont.lineWeight : 0;\n      }).text(function (d) {\n        return d.label;\n      });\n\n      // Center the texts inside the circles.\n      d3.selectAll(\".label-text\").attr(\"x\", function (d) {\n        var self = d3.select(this);\n        var width = self.node().getBBox().width;\n        return -(width / 2);\n      }).style(\"opacity\", function (d) {\n        var self = d3.select(this);\n        var width = self.node().getBBox().width;\n        d.hideLabel = width * 1.05 > d.r * 2;\n        return d.hideLabel ? 0 : 1;\n      }).attr(\"y\", function (d) {\n        return labelFont.size / 2;\n      });\n\n      // Center the texts inside the circles.\n      d3.selectAll(\".value-text\").attr(\"x\", function (d) {\n        var self = d3.select(this);\n        var width = self.node().getBBox().width;\n        return -(width / 2);\n      }).attr(\"y\", function (d) {\n        if (d.hideLabel) {\n          return valueFont.size / 3;\n        } else {\n          return -valueFont.size * 0.5;\n        }\n      });\n\n      node.append(\"title\").text(function (d) {\n        return d.label;\n      });\n    }\n  }, {\n    key: 'renderLegend',\n    value: function renderLegend(width, height, offset, nodes, color) {\n      var _props5 = this.props,\n          data = _props5.data,\n          legendClickFun = _props5.legendClickFun,\n          legendFont = _props5.legendFont;\n\n      var bubble = d3.select('.bubble-chart');\n      var bubbleHeight = bubble.node().getBBox().height;\n\n      var legend = d3.select(this.svg).append(\"g\").attr(\"transform\", function () {\n        return 'translate(' + offset + ',' + bubbleHeight * 0.05 + ')';\n      }).attr(\"class\", \"legend\");\n\n      var textOffset = 0;\n      var texts = legend.selectAll(\".legend-text\").data(nodes).enter().append(\"g\").attr(\"transform\", function (d, i) {\n        var offset = textOffset;\n        textOffset += legendFont.size + 10;\n        return 'translate(0,' + offset + ')';\n      }).on('mouseover', function (d) {\n        d3.select('#' + d.id).attr(\"r\", d.r * 1.04);\n      }).on('mouseout', function (d) {\n        var r = d.r - d.r * 0.04;\n        d3.select('#' + d.id).attr(\"r\", r);\n      }).on(\"click\", function (d) {\n        legendClickFun(d.label);\n      });;\n\n      texts.append(\"rect\").attr(\"width\", 30).attr(\"height\", legendFont.size).attr(\"x\", 0).attr(\"y\", -legendFont.size).style(\"fill\", \"transparent\");\n\n      texts.append(\"rect\").attr(\"width\", legendFont.size).attr(\"height\", legendFont.size).attr(\"x\", 0).attr(\"y\", -legendFont.size).style(\"fill\", function (d) {\n        return d.data.color ? d.data.color : color(nodes.indexOf(d));\n      });\n\n      texts.append(\"text\").style(\"font-size\", legendFont.size + 'px').style(\"font-weight\", function (d) {\n        return legendFont.weight ? legendFont.weight : 600;\n      }).style(\"font-family\", legendFont.family).style(\"fill\", function () {\n        return legendFont.color ? legendFont.color : '#000';\n      }).style(\"stroke\", function () {\n        return legendFont.lineColor ? legendFont.lineColor : '#000';\n      }).style(\"stroke-width\", function () {\n        return legendFont.lineWeight ? legendFont.lineWeight : 0;\n      }).attr(\"x\", function (d) {\n        return legendFont.size + 10;\n      }).attr(\"y\", 0).text(function (d) {\n        return d.label;\n      });\n    }\n  }]);\n\n  return BubbleChart;\n}(_react.Component);\n\nexports.default = BubbleChart;\n\n\nBubbleChart.propTypes = {\n  graph: _propTypes2.default.shape({\n    zoom: _propTypes2.default.number,\n    offsetX: _propTypes2.default.number,\n    offsetY: _propTypes2.default.number\n  }),\n  width: _propTypes2.default.number,\n  height: _propTypes2.default.number,\n  padding: _propTypes2.default.number,\n  showLegend: _propTypes2.default.bool,\n  legendPercentage: _propTypes2.default.number,\n  legendFont: _propTypes2.default.shape({\n    family: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    color: _propTypes2.default.string,\n    weight: _propTypes2.default.string\n  }),\n  valueFont: _propTypes2.default.shape({\n    family: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    color: _propTypes2.default.string,\n    weight: _propTypes2.default.string\n  }),\n  labelFont: _propTypes2.default.shape({\n    family: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    color: _propTypes2.default.string,\n    weight: _propTypes2.default.string\n  })\n};\nBubbleChart.defaultProps = {\n  graph: {\n    zoom: 1.1,\n    offsetX: -0.05,\n    offsetY: -0.01\n  },\n  width: 1000,\n  height: 800,\n  padding: 0,\n  showLegend: true,\n  legendPercentage: 20,\n  legendFont: {\n    family: 'Arial',\n    size: 12,\n    color: '#000',\n    weight: 'bold'\n  },\n  valueFont: {\n    family: 'Arial',\n    size: 16,\n    color: '#fff',\n    weight: 'bold'\n  },\n  labelFont: {\n    family: 'Arial',\n    size: 11,\n    color: '#fff',\n    weight: 'normal'\n  },\n  bubbleClickFun: function bubbleClickFun(label) {\n    console.log('Bubble ' + label + ' is clicked ...');\n  },\n  legendClickFun: function legendClickFun(label) {\n    console.log('Legend ' + label + ' is clicked ...');\n  }\n};"]},"metadata":{},"sourceType":"script"}