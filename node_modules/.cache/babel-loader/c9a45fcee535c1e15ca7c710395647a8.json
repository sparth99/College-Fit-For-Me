{"ast":null,"code":"var _jsxFileName = \"/Users/Parth/web-project/src/Pages/Attractions.js\";\nimport React, { Component } from 'react';\nimport { Nav, CardDeck, Spinner } from 'react-bootstrap';\nimport '../Styles/Attractions.css';\nimport Navigation from '../Components/Navigation';\nimport Footer from '../Components/Footer';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport AttractionFilters from '../Components/AttractionFilters';\nimport { api } from '../instance';\nexport default class Attractions extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      attractions: null,\n      page: 1,\n      prev_page: 1,\n      apiLink: \"https://api.collegefitfor.me/restaurants\",\n      loading: true,\n      filtered: false\n    };\n\n    this.setter = apiLink => {\n      let baseApi = String(apiLink).substring(0, String(apiLink).lastIndexOf('&'));\n      this.setState({\n        apiLink: baseApi\n      });\n      axios.get(apiLink).then(res => {\n        const attractions = res.data;\n        this.setState({\n          attractions,\n          page: 1\n        });\n\n        if (apiLink === 'https://api.collegefitfor.me/restaurants' || String(apiLink).substring(0, 55) === 'https://api.collegefitfor.me/restaurants/filter/?order=') {\n          this.setState({\n            filtered: false\n          });\n        } else {\n          this.setState({\n            filtered: true\n          });\n        }\n      });\n    };\n\n    this.fetchAttractions = () => {\n      axios.get(this.state.apiLink, {\n        params: {\n          page: this.state.page\n        }\n      }).then(res => res.data).then(attractions => {\n        this.setState({\n          attractions,\n          loading: false\n        });\n      }).catch(() => {\n        // attempting to go forward to a page that doesn't exist\n        this.setState({\n          page: this.state.page - 1,\n          loading: false\n        });\n      });\n    };\n\n    this.formatString = value => {\n      return value === \"\" ? 'N/A' : value;\n    };\n\n    this.displayAttractions = () => {\n      const {\n        attractions\n      } = this.state;\n      let rows = [];\n\n      for (let r = 0; r < 5; r++) {\n        let children = [];\n\n        for (let c = 0; c < 4; c++) {\n          if (attractions.length <= c + 4 * r) {\n            break;\n          }\n\n          var attraction = attractions[c + 4 * r];\n          children.push(\n          /*#__PURE__*/\n          React.createElement(Card, {\n            className: \"attractions-card\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 11\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(Nav.Link, {\n            className: \"attraction-instance\",\n            href: '/attractions/' + String(attraction.restaurant_name + \"*\" + attraction.id).replace(/ /g, '_').toLowerCase(),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 13\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(Card.Img, {\n            src: attraction.image_url,\n            variant: \"top\",\n            height: \"200\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }\n          }),\n          /*#__PURE__*/\n          React.createElement(Card.Body, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 15\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(Card.Title, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }\n          }, attraction.restaurant_name),\n          /*#__PURE__*/\n          React.createElement(Card.Text, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 17\n            }\n          }, \"Category: \", this.formatString(attraction.categories))))));\n        }\n\n        rows.push(\n        /*#__PURE__*/\n        React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }\n        }));\n        rows.push(\n        /*#__PURE__*/\n        React.createElement(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }\n        }, children));\n        if (attractions.length < 4 * r) break;\n      }\n\n      return rows;\n    };\n\n    this.changePage = (event, page, prev_page) => {\n      event.preventDefault();\n      this.setState({\n        page: page,\n        prev_page: prev_page,\n        loading: true\n      }, () => this.fetchAttractions());\n    };\n\n    this.displayButtons = filtered => {\n      let buttons = [];\n\n      if (filtered) {\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(e, this.state.page > 1 ? this.state.page - 1 : 1, this.state.page > 1 ? this.state.page - 1 : 1);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 9\n          }\n        }, \"<<\"));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 9\n          }\n        }, this.state.page));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(e, this.state.page + 1, this.state.page + 1);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 9\n          }\n        }, \">>\"));\n      } else {\n        if (this.state.prev_page > 7) {\n          buttons.push(\n          /*#__PURE__*/\n          React.createElement(Button, {\n            variant: \"outline-primary mr-1\",\n            onClick: e => {\n              this.changePage(e, this.state.prev_page - 7, this.state.prev_page - 7);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 11\n            }\n          }, \"<<\"));\n        }\n\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(e, this.state.prev_page, this.state.prev_page);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 9\n          }\n        }, this.state.prev_page));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(e, this.state.prev_page + 1, this.state.prev_page);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 9\n          }\n        }, this.state.prev_page + 1));\n\n        if (this.state.prev_page < 99) {\n          buttons.push(\n          /*#__PURE__*/\n          React.createElement(Button, {\n            variant: \"outline-primary mr-1\",\n            onClick: e => {\n              this.changePage(e, this.state.prev_page + 2, this.state.prev_page);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 11\n            }\n          }, this.state.prev_page + 2));\n          buttons.push(\n          /*#__PURE__*/\n          React.createElement(Button, {\n            variant: \"outline-primary mr-1\",\n            onClick: e => {\n              this.changePage(e, this.state.prev_page + 3, this.state.prev_page);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 11\n            }\n          }, this.state.prev_page + 3));\n          buttons.push(\n          /*#__PURE__*/\n          React.createElement(Button, {\n            variant: \"outline-primary mr-1\",\n            onClick: e => {\n              this.changePage(e, this.state.prev_page + 4, this.state.prev_page);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 11\n            }\n          }, this.state.prev_page + 4));\n          buttons.push(\n          /*#__PURE__*/\n          React.createElement(Button, {\n            variant: \"outline-primary mr-1\",\n            onClick: e => {\n              this.changePage(e, this.state.prev_page + 5, this.state.prev_page);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 11\n            }\n          }, this.state.prev_page + 5));\n          buttons.push(\n          /*#__PURE__*/\n          React.createElement(Button, {\n            variant: \"outline-primary mr-1\",\n            onClick: e => {\n              this.changePage(e, this.state.prev_page + 6, this.state.prev_page);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 11\n            }\n          }, this.state.prev_page + 6));\n          buttons.push(\n          /*#__PURE__*/\n          React.createElement(Button, {\n            variant: \"outline-primary mr-1\",\n            onClick: e => {\n              this.changePage(e, this.state.prev_page + 7, this.state.prev_page + 7);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 11\n            }\n          }, \">>\"));\n        }\n      }\n\n      return buttons;\n    };\n  }\n\n  componentDidMount() {\n    this.fetchAttractions();\n  }\n  /* works but is gacky. Use cleaner approach to access API like fetchAttractions method */\n\n\n  render() {\n    return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Navigation, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Jumbotron, {\n        className: \"attractions-jumbotron\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }\n      }, \"Attractions\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        className: \"attractions-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }\n      }, \"Find the best things to do in your college town!\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }\n      }, \"Whether you're interested in fine dinning, museums, or parks, there's always something for you to do!\"), this.state.loading ?\n      /*#__PURE__*/\n      React.createElement(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        className: \"Spinner-custom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }\n      }) :\n      /*#__PURE__*/\n      React.createElement(React.Fragment, null,\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"row d-flex justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(AttractionFilters, {\n        setter: this.setter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 15\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(CardDeck, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }\n      }, this.displayAttractions(this.state.attractions)),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }\n      }), this.displayButtons(this.state.filtered)),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 9\n        }\n      }))\n    );\n  }\n\n}","map":{"version":3,"sources":["/Users/Parth/web-project/src/Pages/Attractions.js"],"names":["React","Component","Nav","CardDeck","Spinner","Navigation","Footer","Jumbotron","Card","Button","axios","AttractionFilters","api","Attractions","state","attractions","page","prev_page","apiLink","loading","filtered","setter","baseApi","String","substring","lastIndexOf","setState","get","then","res","data","fetchAttractions","params","catch","formatString","value","displayAttractions","rows","r","children","c","length","attraction","push","restaurant_name","id","replace","toLowerCase","image_url","categories","changePage","event","preventDefault","displayButtons","buttons","e","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Nav, CardDeck, Spinner } from 'react-bootstrap';\nimport '../Styles/Attractions.css';\nimport Navigation from '../Components/Navigation';\nimport Footer from '../Components/Footer';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport AttractionFilters from '../Components/AttractionFilters';\nimport { api } from '../instance';\n\nexport default class Attractions extends Component {\n  state = {\n    attractions: null,\n    page: 1,\n    prev_page: 1,\n    apiLink: \"https://api.collegefitfor.me/restaurants\",\n    loading: true,\n    filtered: false,\n  };\n\n  componentDidMount() {\n    this.fetchAttractions();\n  }\n\n  /* works but is gacky. Use cleaner approach to access API like fetchAttractions method */\n  setter = (apiLink) => {\n    let baseApi = String(apiLink).substring(0, String(apiLink).lastIndexOf('&'))\n    this.setState({ apiLink : baseApi })\n    axios.get(apiLink)\n       .then(res => {\n           const attractions = res.data;\n           this.setState({ attractions, page : 1 });\n           if (apiLink === 'https://api.collegefitfor.me/restaurants' || String(apiLink).substring(0, 55) === 'https://api.collegefitfor.me/restaurants/filter/?order=') {\n             this.setState({ filtered: false })\n           } else {\n             this.setState({ filtered: true })\n           }\n       })\n  }\n\n  fetchAttractions = () => {\n    axios.get(this.state.apiLink, {\n      params: {\n        page: this.state.page,\n      },\n    })\n    .then((res) => res.data)\n    .then((attractions) => {\n      this.setState({ attractions, loading: false });\n    })\n    .catch(() => {\n      // attempting to go forward to a page that doesn't exist\n      this.setState({ page: this.state.page - 1, loading : false})\n    });\n  };\n\n  formatString = (value) => {\n    return value === \"\" ? 'N/A' : value;\n  }\n\n  displayAttractions = () => {\n    const { attractions } = this.state;\n    let rows = [];\n    for (let r = 0; r < 5; r++) {\n      let children = [];\n      for (let c = 0; c < 4; c++) {\n        if (attractions.length <= c + 4 * r) {\n          break;\n        }\n        var attraction = attractions[c + 4 * r];\n        children.push(\n          <Card className=\"attractions-card\">\n            <Nav.Link className=\"attraction-instance\"\n              href={\n                '/attractions/' +\n                String(attraction.restaurant_name + \"*\" + attraction.id)\n                  .replace(/ /g, '_')\n                  .toLowerCase()\n              }\n            >\n              <Card.Img src={attraction.image_url} variant=\"top\" height=\"200\" />\n              <Card.Body>\n                <Card.Title>{attraction.restaurant_name}</Card.Title>\n                <Card.Text>Category: {this.formatString(attraction.categories)}</Card.Text>\n              </Card.Body>\n            </Nav.Link>\n          </Card>\n        );\n      }\n      rows.push(<br></br>);\n      rows.push(<div className=\"row\">{children}</div>);\n      if (attractions.length < 4 * r) break;\n    }\n    return rows;\n  };\n\n  changePage = (event, page, prev_page) => {\n    event.preventDefault();\n\n    this.setState(\n      {\n        page: page,\n        prev_page: prev_page,\n        loading: true,\n      },\n      () => this.fetchAttractions()\n    );\n  };\n\n  displayButtons = (filtered) => {\n    let buttons = []\n\n    if (filtered) {\n      buttons.push(\n        <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.page > 1 ? this.state.page - 1 : 1, this.state.page > 1 ? this.state.page - 1 : 1)}}>\n            &lt;&lt;\n        </Button>\n      )\n      buttons.push(\n        <Button variant=\"outline-primary mr-1\">\n          {this.state.page}\n        </Button>\n      )\n      buttons.push(\n        <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.page + 1, this.state.page + 1)}}>\n            &gt;&gt;\n        </Button>\n      )\n    } else {\n      if (this.state.prev_page > 7) {\n        buttons.push(\n          <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.prev_page - 7, this.state.prev_page - 7)}}>\n              &lt;&lt;\n          </Button>\n        )\n      }\n  \n      buttons.push(\n        <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.prev_page, this.state.prev_page)}}>\n          {this.state.prev_page}\n        </Button>\n      )\n      buttons.push(\n        <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.prev_page + 1, this.state.prev_page)}}>\n          {this.state.prev_page + 1}\n        </Button>\n      )\n  \n      if (this.state.prev_page < 99) {\n        buttons.push(\n          <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.prev_page + 2, this.state.prev_page)}}>\n            {this.state.prev_page + 2}\n          </Button>\n        )\n        buttons.push(\n          <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.prev_page + 3, this.state.prev_page)}}>\n            {this.state.prev_page + 3}\n          </Button>\n        )\n        buttons.push(\n          <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.prev_page + 4, this.state.prev_page)}}>\n            {this.state.prev_page + 4}\n          </Button>\n        )\n        buttons.push(\n          <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.prev_page + 5, this.state.prev_page)}}>\n            {this.state.prev_page + 5}\n          </Button>\n        )\n        buttons.push(\n          <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.prev_page + 6, this.state.prev_page)}}>\n            {this.state.prev_page + 6}\n          </Button>\n        )\n        buttons.push(\n          <Button variant=\"outline-primary mr-1\" onClick={(e) => {this.changePage(e, this.state.prev_page + 7, this.state.prev_page + 7)}}>\n              &gt;&gt;\n          </Button>\n        )\n      }\n    }\n\n    return buttons\n  }\n\n  render() {\n    return (\n      <div>\n        <Navigation />\n        <Jumbotron className=\"attractions-jumbotron\"></Jumbotron>\n        <h1>Attractions</h1>\n        <p className=\"attractions-header\">Find the best things to do in your college town!</p>\n        <p>\n          Whether you're interested in fine dinning, museums, or parks, there's\n          always something for you to do!\n        </p>\n        {this.state.loading ? (\n          <Spinner\n            animation=\"border\"\n            role=\"status\"\n            className=\"Spinner-custom\"\n          />\n        ) : (\n          <>\n            <div className='row d-flex justify-content-center'>\n              <AttractionFilters setter={this.setter} />\n            </div>\n            <CardDeck>\n              {this.displayAttractions(this.state.attractions)}\n            </CardDeck>\n            <p />\n            {this.displayButtons(this.state.filtered)}\n          </>\n        )}\n        <p />\n        <Footer />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}