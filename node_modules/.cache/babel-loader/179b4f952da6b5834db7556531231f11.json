{"ast":null,"code":"var _jsxFileName = \"/Users/Parth/web-project/src/Pages/Cities.js\";\nimport React, { Component } from 'react';\nimport { Nav, CardDeck, Spinner, Button, Jumbotron, Card, Col, ListGroup, ListGroupItem, Container } from 'react-bootstrap';\nimport axios from 'axios';\nimport '../Styles/Cities.css';\nimport Navigation from '../Components/Navigation';\nimport Footer from '../Components/Footer';\nimport CityFilters from '../Components/CityFilters';\nimport SearchInput from '../Components/SearchInput';\nexport default class Cities extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      cities: null,\n      page: 1,\n      apiLink: 'https://api.collegefitfor.me/cities',\n      loading: true,\n      filtered: false\n    };\n\n    this.setter = apiLink => {\n      let baseApi = String(apiLink).substring(0, String(apiLink).lastIndexOf('&'));\n      this.setState({\n        apiLink: baseApi\n      });\n      axios.get(apiLink).then(res => {\n        const cities = res.data;\n        this.setState({\n          cities,\n          page: 1\n        });\n\n        if (apiLink === 'https://api.collegefitfor.me/cities' || String(apiLink).substring(0, 50) === 'https://api.collegefitfor.me/cities/filter/?order=') {\n          this.setState({\n            filtered: false\n          });\n        } else {\n          this.setState({\n            filtered: true\n          });\n        }\n      });\n    };\n\n    this.fetchCities = () => {\n      axios.get(this.state.apiLink, {\n        params: {\n          page: this.state.page\n        }\n      }).then(res => res.data).then(cities => {\n        this.setState({\n          cities,\n          loading: false\n        });\n      }).catch(() => {\n        // attempting to go forward to a page that doesn't exist\n        this.setState({\n          page: this.state.page - 1,\n          loading: false\n        });\n      });\n    };\n\n    this.formatNumber = value => {\n      return value === 0 ? 'N/A' : value.toLocaleString();\n    };\n\n    this.formatIndex = value => {\n      return value === 0 ? 'N/A' : value.toFixed(2);\n    };\n\n    this.displayCities = () => {\n      const {\n        cities\n      } = this.state;\n      let rows = [];\n\n      for (let r = 0; r < 5; r++) {\n        let children = [];\n\n        for (let c = 0; c < 4; c++) {\n          if (cities.length <= c + 4 * r) {\n            break;\n          }\n\n          var city = cities[c + 4 * r];\n          children.push(\n          /*#__PURE__*/\n          React.createElement(Card, {\n            style: {\n              maxWidth: \"17rem\"\n            },\n            className: \"cities-card\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 11\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(Nav.Link, {\n            className: \"city-instance\",\n            href: '/cities/' + String(city.city_state_name),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 13\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(Card.Img, {\n            variant: \"top\",\n            src: city.image_url,\n            style: {\n              height: '190px'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }\n          }),\n          /*#__PURE__*/\n          React.createElement(Card.Body, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(Card.Title, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 17\n            }\n          }, city.city_name,\n          /*#__PURE__*/\n          React.createElement(\"br\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }\n          }), city.state_name),\n          /*#__PURE__*/\n          React.createElement(ListGroup, {\n            className: \"list-group-flush\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(ListGroupItem, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 19\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(\"span\", {\n            className: \"font-weight-bold\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 21\n            }\n          }, \"Population: \"), this.formatNumber(city.population)),\n          /*#__PURE__*/\n          React.createElement(ListGroupItem, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 19\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(\"span\", {\n            className: \"font-weight-bold\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 21\n            }\n          }, \"Safety Index: \"), this.formatIndex(city.safety_index)),\n          /*#__PURE__*/\n          React.createElement(ListGroupItem, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 19\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(\"span\", {\n            className: \"font-weight-bold\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 21\n            }\n          }, \"Rent Index: \"), this.formatIndex(city.rent_index)),\n          /*#__PURE__*/\n          React.createElement(ListGroupItem, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 19\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(\"span\", {\n            className: \"font-weight-bold\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 21\n            }\n          }, \"Healthcare Index: \"), this.formatIndex(city.health_care_index)))))));\n        }\n\n        rows.push(\n        /*#__PURE__*/\n        React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 17\n          }\n        }));\n        rows.push(\n        /*#__PURE__*/\n        React.createElement(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 17\n          }\n        }, children));\n        if (cities.length < 4 * r) break;\n      }\n\n      return rows;\n    };\n\n    this.changePage = page => {\n      this.setState({\n        page: page,\n        loading: true\n      }, () => this.fetchCities());\n    };\n\n    this.displayButtons = filtered => {\n      let buttons = [];\n\n      if (filtered) {\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(this.state.page > 1 ? this.state.page - 1 : 1);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 9\n          }\n        }, \"<<\"));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 9\n          }\n        }, this.state.page));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(this.state.page + 1);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 9\n          }\n        }, \">>\"));\n      } else {\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(1);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 9\n          }\n        }, \"<<\"));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(1);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 9\n          }\n        }, \"1\"));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(2);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 9\n          }\n        }, \"2\"));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(3);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 9\n          }\n        }, \"3\"));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(4);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 9\n          }\n        }, \"4\"));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(5);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 9\n          }\n        }, \"5\"));\n        buttons.push(\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"outline-primary mr-1\",\n          onClick: e => {\n            this.changePage(5);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 9\n          }\n        }, \">>\"));\n      }\n\n      return buttons;\n    };\n  }\n\n  componentDidMount() {\n    this.fetchCities();\n  }\n  /* works but is gacky. Use cleaner approach to access API like fetchCities method */\n\n\n  render() {\n    return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Navigation, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Jumbotron, {\n        className: \"cities-jumbotron\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 9\n        }\n      }, \"Cities\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        className: \"cities-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 9\n        }\n      }, \"City matters a lot when deciding a University to attend.\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 9\n        }\n      }, \"Whether you're a West Coast or East Coast person, prefer a big or small city, or looking for a city that has great access to nature, there's a city for you!\"), this.state.loading ?\n      /*#__PURE__*/\n      React.createElement(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        className: \"Spinner-custom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }\n      }) :\n      /*#__PURE__*/\n      React.createElement(React.Fragment, null,\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"d-flex justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"d-flex flex-column align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 15\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 17\n        }\n      }, \"Search Cities\"),\n      /*#__PURE__*/\n      React.createElement(SearchInput, {\n        modelType: \"cities\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 17\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 17\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 17\n        }\n      }, \"Filter Cities\"),\n      /*#__PURE__*/\n      React.createElement(CityFilters, {\n        setter: this.setter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 17\n        }\n      }))),\n      /*#__PURE__*/\n      React.createElement(CardDeck, {\n        className: \"justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }\n      }, this.displayCities()),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }\n      }), this.displayButtons(this.state.filtered)),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 9\n        }\n      }))\n    );\n  }\n\n}","map":{"version":3,"sources":["/Users/Parth/web-project/src/Pages/Cities.js"],"names":["React","Component","Nav","CardDeck","Spinner","Button","Jumbotron","Card","Col","ListGroup","ListGroupItem","Container","axios","Navigation","Footer","CityFilters","SearchInput","Cities","state","cities","page","apiLink","loading","filtered","setter","baseApi","String","substring","lastIndexOf","setState","get","then","res","data","fetchCities","params","catch","formatNumber","value","toLocaleString","formatIndex","toFixed","displayCities","rows","r","children","c","length","city","push","maxWidth","city_state_name","image_url","height","city_name","state_name","population","safety_index","rent_index","health_care_index","changePage","displayButtons","buttons","e","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Nav,\n  CardDeck,\n  Spinner,\n  Button,\n  Jumbotron,\n  Card,\n  Col,\n  ListGroup, \n  ListGroupItem,\n  Container\n} from 'react-bootstrap';\nimport axios from 'axios';\nimport '../Styles/Cities.css';\nimport Navigation from '../Components/Navigation';\nimport Footer from '../Components/Footer';\nimport CityFilters from '../Components/CityFilters';\nimport SearchInput from '../Components/SearchInput';\n\nexport default class Cities extends Component {\n  state = {\n    cities: null,\n    page: 1,\n    apiLink: 'https://api.collegefitfor.me/cities',\n    loading: true,\n    filtered: false,\n  };\n\n  componentDidMount() {\n    this.fetchCities();\n  }\n\n  /* works but is gacky. Use cleaner approach to access API like fetchCities method */\n  setter = (apiLink) => {\n    let baseApi = String(apiLink).substring(\n      0,\n      String(apiLink).lastIndexOf('&')\n    );\n    this.setState({ apiLink: baseApi });\n    axios.get(apiLink).then((res) => {\n      const cities = res.data;\n      this.setState({ cities, page: 1 });\n      if (\n        apiLink === 'https://api.collegefitfor.me/cities' ||\n        String(apiLink).substring(0, 50) ===\n          'https://api.collegefitfor.me/cities/filter/?order='\n      ) {\n        this.setState({ filtered: false });\n      } else {\n        this.setState({ filtered: true });\n      }\n    });\n  };\n\n  fetchCities = () => {\n    axios\n      .get(this.state.apiLink, {\n        params: {\n          page: this.state.page,\n        },\n      })\n      .then((res) => res.data)\n      .then((cities) => {\n        this.setState({ cities, loading: false });\n      })\n      .catch(() => {\n        // attempting to go forward to a page that doesn't exist\n        this.setState({ page: this.state.page - 1, loading: false });\n      });\n  };\n\n  formatNumber = (value) => {\n    return value === 0 ? 'N/A' : value.toLocaleString();\n  };\n\n  formatIndex = (value) => {\n    return value === 0 ? 'N/A' : value.toFixed(2);\n  };\n\n  displayCities = () => {\n    const { cities } = this.state;\n    let rows = [];\n    for (let r = 0; r < 5; r++) {\n      let children = [];\n      for (let c = 0; c < 4; c++) {\n        if (cities.length <= c + 4 * r) {\n          break;\n        }\n        var city = cities[c + 4 * r];\n        children.push(\n          <Card\n            style={{ maxWidth: \"17rem\"}}\n            className=\"cities-card\"\n          >\n            <Nav.Link\n              className=\"city-instance\"\n              href={'/cities/' + String(city.city_state_name)}\n            >\n              <Card.Img\n                variant=\"top\"\n                src={city.image_url}\n                style={{ height: '190px'}}\n              />\n              <Card.Body>\n                <Card.Title>\n                  {city.city_name} \n                  <br></br>\n                  {city.state_name}\n                </Card.Title>\n                <ListGroup className=\"list-group-flush\">\n                  <ListGroupItem>\n                    <span className =\"font-weight-bold\">Population: </span>\n                    {this.formatNumber(city.population)}\n                  </ListGroupItem>\n                  <ListGroupItem>\n                    <span className =\"font-weight-bold\">Safety Index: </span>\n                    {this.formatIndex(city.safety_index)}\n                  </ListGroupItem>\n                  <ListGroupItem>\n                    <span className =\"font-weight-bold\">Rent Index: </span>\n                    {this.formatIndex(city.rent_index)}\n                  </ListGroupItem>\n                  <ListGroupItem>\n                    <span className =\"font-weight-bold\">Healthcare Index: </span>\n                    {this.formatIndex(city.health_care_index)}\n                  </ListGroupItem>\n                </ListGroup>\n              </Card.Body>\n            </Nav.Link>\n          </Card>\n        );\n      }\n      rows.push(<br></br>);\n      rows.push(<div className=\"row\">{children}</div>);\n      if (cities.length < 4 * r) break;\n    }\n    return rows;\n  };\n\n  changePage = (page) => {\n    this.setState(\n      {\n        page: page,\n        loading: true,\n      },\n      () => this.fetchCities()\n    );\n  };\n\n  displayButtons = (filtered) => {\n    let buttons = [];\n    if (filtered) {\n      buttons.push(\n        <Button\n          variant=\"outline-primary mr-1\"\n          onClick={(e) => {\n            this.changePage(this.state.page > 1 ? this.state.page - 1 : 1);\n          }}\n        >\n          &lt;&lt;\n        </Button>\n      );\n      buttons.push(\n        <Button variant=\"outline-primary mr-1\">{this.state.page}</Button>\n      );\n      buttons.push(\n        <Button\n          variant=\"outline-primary mr-1\"\n          onClick={(e) => {\n            this.changePage(this.state.page + 1);\n          }}\n        >\n          &gt;&gt;\n        </Button>\n      );\n    } else {\n      buttons.push(\n        <Button\n          variant=\"outline-primary mr-1\"\n          onClick={(e) => {\n            this.changePage(1);\n          }}\n        >\n          &lt;&lt;\n        </Button>\n      );\n      buttons.push(\n        <Button\n          variant=\"outline-primary mr-1\"\n          onClick={(e) => {\n            this.changePage(1);\n          }}\n        >\n          1\n        </Button>\n      );\n      buttons.push(\n        <Button\n          variant=\"outline-primary mr-1\"\n          onClick={(e) => {\n            this.changePage(2);\n          }}\n        >\n          2\n        </Button>\n      );\n      buttons.push(\n        <Button\n          variant=\"outline-primary mr-1\"\n          onClick={(e) => {\n            this.changePage(3);\n          }}\n        >\n          3\n        </Button>\n      );\n      buttons.push(\n        <Button\n          variant=\"outline-primary mr-1\"\n          onClick={(e) => {\n            this.changePage(4);\n          }}\n        >\n          4\n        </Button>\n      );\n      buttons.push(\n        <Button\n          variant=\"outline-primary mr-1\"\n          onClick={(e) => {\n            this.changePage(5);\n          }}\n        >\n          5\n        </Button>\n      );\n      buttons.push(\n        <Button\n          variant=\"outline-primary mr-1\"\n          onClick={(e) => {\n            this.changePage(5);\n          }}\n        >\n          &gt;&gt;\n        </Button>\n      );\n    }\n    return buttons;\n  };\n\n  render() {\n    return (\n      <div>\n        <Navigation />\n        <Jumbotron className=\"cities-jumbotron\"></Jumbotron>\n        <h1>Cities</h1>\n        <p className=\"cities-header\">\n          City matters a lot when deciding a University to attend.\n        </p>\n        <p>\n          Whether you're a West Coast or East Coast person, prefer a big or\n          small city, or looking for a city that has great access to nature,\n          there's a city for you!\n        </p>\n        {this.state.loading ? (\n          <Spinner\n            animation=\"border\"\n            role=\"status\"\n            className=\"Spinner-custom\"\n          />\n        ) : (\n          <>\n            <p />\n            <div className=\"d-flex justify-content-center\">\n              <div className=\"d-flex flex-column align-items-center\">\n                <h3>Search Cities</h3>\n                <SearchInput modelType=\"cities\" />\n                <br />\n                <p>Filter Cities</p>\n                <CityFilters setter={this.setter} />\n              </div>\n            </div>\n\n            <CardDeck className = \"justify-content-center\">\n              {this.displayCities()}\n            </CardDeck>\n            <p />\n            {this.displayButtons(this.state.filtered)}\n          </>\n        )}\n        <p />\n        <Footer />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}