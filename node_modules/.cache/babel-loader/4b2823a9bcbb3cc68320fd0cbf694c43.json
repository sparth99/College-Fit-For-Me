{"ast":null,"code":"var _jsxFileName = \"/Users/Parth/web-project/src/Pages/SearchResults.js\";\nimport React, { Component } from 'react';\nimport { Nav, CardDeck, Spinner, Button, Card, ButtonGroup } from 'react-bootstrap';\nimport { api } from '../instance.js';\nimport Navigation from '../Components/Navigation';\nimport Footer from '../Components/Footer';\nexport default class SearchResults extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      models: [],\n      loading: true,\n      routeModelType: 'cities',\n      apiModelType: 'cities',\n      searchQuery: ''\n    };\n\n    this.fetchModels = () => {\n      let urlSplit = String(window.location.href).split('/');\n      let searchInfo = urlSplit[urlSplit.length - 1];\n      let routeModelType = searchInfo.substring(0, searchInfo.indexOf('?'));\n      let apiModelType = routeModelType;\n\n      if (routeModelType === 'attractions') {\n        apiModelType = 'restaurants';\n      }\n\n      let searchQuery = searchInfo.substring(searchInfo.indexOf('=') + 1).replace(/%20/g, ' ');\n      this.setState({\n        searchQuery,\n        routeModelType,\n        apiModelType\n      });\n      api.get(`${apiModelType}/search/`, {\n        params: {\n          search_query: searchQuery\n        }\n      }).then(res => res.data).then(models => {\n        this.setState({\n          models,\n          loading: false\n        });\n      }).catch(() => {\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.formatPercent = value => {\n      return value === 0 ? 'N/A' : value.toFixed(2).toString() + '%';\n    };\n\n    this.formatString = value => {\n      return value === '' ? 'N/A' : value;\n    };\n\n    this.displayModels = () => {\n      const models = this.state.models;\n      let rows = [];\n\n      for (let r = 0; r < Infinity; r++) {\n        let children = [];\n\n        for (let c = 0; c < 4; c++) {\n          if (models.length <= c + 4 * r) {\n            break;\n          }\n\n          var model = models[c + 4 * r];\n\n          if (this.state.routeModelType === 'cities') {\n            children.push(\n            /*#__PURE__*/\n            React.createElement(Card, {\n              className: \"cities-card\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 13\n              }\n            },\n            /*#__PURE__*/\n            React.createElement(Nav.Link, {\n              className: \"city-instance\",\n              href: '/cities/' + String(model.city_state_name),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 15\n              }\n            },\n            /*#__PURE__*/\n            React.createElement(Card.Img, {\n              src: model.image_url,\n              variant: \"top\",\n              height: \"200\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 17\n              }\n            }),\n            /*#__PURE__*/\n            React.createElement(Card.Body, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 17\n              }\n            },\n            /*#__PURE__*/\n            React.createElement(Card.Title, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 19\n              }\n            }, model.city_name, \", \", model.state_name),\n            /*#__PURE__*/\n            React.createElement(Card.Text, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 19\n              }\n            }, \"Population: \", model.population.toLocaleString())))));\n          } else if (this.state.routeModelType === 'universities') {\n            children.push(\n            /*#__PURE__*/\n            React.createElement(Card, {\n              className: \"universities-card\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 13\n              }\n            },\n            /*#__PURE__*/\n            React.createElement(Nav.Link, {\n              className: \"university-instance\",\n              href: '/universities/' + model.name.replace(/ /g, '_'),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 15\n              }\n            },\n            /*#__PURE__*/\n            React.createElement(Card.Img, {\n              src: model.image_url,\n              variant: \"top\",\n              height: \"200\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }\n            }),\n            /*#__PURE__*/\n            React.createElement(Card.Body, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 17\n              }\n            },\n            /*#__PURE__*/\n            React.createElement(Card.Title, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 19\n              }\n            }, model.name),\n            /*#__PURE__*/\n            React.createElement(Card.Text, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 19\n              }\n            }, \"City: \", model.city_name, \", \", model.state_name),\n            /*#__PURE__*/\n            React.createElement(Card.Text, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 19\n              }\n            }, \"Acceptance Rate:\", ' ', this.formatPercent(model.admission_rate))))));\n          } else {\n            children.push(\n            /*#__PURE__*/\n            React.createElement(Card, {\n              className: \"attractions-card\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 13\n              }\n            },\n            /*#__PURE__*/\n            React.createElement(Nav.Link, {\n              className: \"attraction-instance\",\n              href: '/attractions/' + String(model.restaurant_name + '*' + model.id).replace(/ /g, '_').toLowerCase(),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 15\n              }\n            },\n            /*#__PURE__*/\n            React.createElement(Card.Img, {\n              src: model.image_url,\n              variant: \"top\",\n              height: \"200\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }\n            }),\n            /*#__PURE__*/\n            React.createElement(Card.Body, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 17\n              }\n            },\n            /*#__PURE__*/\n            React.createElement(Card.Title, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 19\n              }\n            }, model.restaurant_name),\n            /*#__PURE__*/\n            React.createElement(Card.Text, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 19\n              }\n            }, \"Category: \", this.formatString(model.categories))))));\n          }\n        }\n\n        rows.push(\n        /*#__PURE__*/\n        React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 17\n          }\n        }));\n        rows.push(\n        /*#__PURE__*/\n        React.createElement(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 17\n          }\n        }, children));\n        if (models.length < 4 * r) break;\n      }\n\n      return rows;\n    };\n\n    this.modelSelectionRow = () =>\n    /*#__PURE__*/\n    React.createElement(ButtonGroup, {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 5\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Button, {\n      variant: \"outline-seconday\",\n      id: \"dropdown-btn\",\n      onClick: () => this.searchModels('cities'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 7\n      }\n    }, \"Cities\"),\n    /*#__PURE__*/\n    React.createElement(Button, {\n      variant: \"outline-seconday\",\n      id: \"dropdown-btn\",\n      onClick: () => this.searchModels('universities'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 7\n      }\n    }, \"Universities\"),\n    /*#__PURE__*/\n    React.createElement(Button, {\n      variant: \"outline-seconday\",\n      id: \"dropdown-btn\",\n      onClick: () => this.searchModels('restaurants'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }\n    }, \"Restaurants\"));\n  }\n\n  componentDidMount() {\n    this.fetchModels();\n  }\n\n  render() {\n    return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Navigation, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 9\n        }\n      }, \"Search Results for \\\"\", this.state.searchQuery, \"\\\"\"), this.state.loading ?\n      /*#__PURE__*/\n      React.createElement(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        className: \"Spinner-custom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }\n      }) :\n      /*#__PURE__*/\n      React.createElement(CardDeck, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }\n      }, this.displayModels()),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 9\n        }\n      }))\n    );\n  }\n\n}","map":{"version":3,"sources":["/Users/Parth/web-project/src/Pages/SearchResults.js"],"names":["React","Component","Nav","CardDeck","Spinner","Button","Card","ButtonGroup","api","Navigation","Footer","SearchResults","state","models","loading","routeModelType","apiModelType","searchQuery","fetchModels","urlSplit","String","window","location","href","split","searchInfo","length","substring","indexOf","replace","setState","get","params","search_query","then","res","data","catch","formatPercent","value","toFixed","toString","formatString","displayModels","rows","r","Infinity","children","c","model","push","city_state_name","image_url","city_name","state_name","population","toLocaleString","name","admission_rate","restaurant_name","id","toLowerCase","categories","modelSelectionRow","searchModels","componentDidMount","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SACEC,GADF,EAEEC,QAFF,EAGEC,OAHF,EAIEC,MAJF,EAKEC,IALF,EAMEC,WANF,QAOO,iBAPP;AAQA,SAASC,GAAT,QAAoB,gBAApB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AAEA,eAAe,MAAMC,aAAN,SAA4BV,SAA5B,CAAsC;AAAA;AAAA;AAAA,SACnDW,KADmD,GAC3C;AACNC,MAAAA,MAAM,EAAE,EADF;AAENC,MAAAA,OAAO,EAAE,IAFH;AAGNC,MAAAA,cAAc,EAAE,QAHV;AAINC,MAAAA,YAAY,EAAE,QAJR;AAKNC,MAAAA,WAAW,EAAE;AALP,KAD2C;;AAAA,SAanDC,WAbmD,GAarC,MAAM;AAClB,UAAIC,QAAQ,GAAGC,MAAM,CAACC,MAAM,CAACC,QAAP,CAAgBC,IAAjB,CAAN,CAA6BC,KAA7B,CAAmC,GAAnC,CAAf;AACA,UAAIC,UAAU,GAAGN,QAAQ,CAACA,QAAQ,CAACO,MAAT,GAAkB,CAAnB,CAAzB;AACA,UAAIX,cAAc,GAAGU,UAAU,CAACE,SAAX,CAAqB,CAArB,EAAwBF,UAAU,CAACG,OAAX,CAAmB,GAAnB,CAAxB,CAArB;AACA,UAAIZ,YAAY,GAAGD,cAAnB;;AACA,UAAIA,cAAc,KAAK,aAAvB,EAAsC;AACpCC,QAAAA,YAAY,GAAG,aAAf;AACD;;AACD,UAAIC,WAAW,GAAGQ,UAAU,CACzBE,SADe,CACLF,UAAU,CAACG,OAAX,CAAmB,GAAnB,IAA0B,CADrB,EAEfC,OAFe,CAEP,MAFO,EAEC,GAFD,CAAlB;AAGA,WAAKC,QAAL,CAAc;AAAEb,QAAAA,WAAF;AAAeF,QAAAA,cAAf;AAA+BC,QAAAA;AAA/B,OAAd;AAEAR,MAAAA,GAAG,CACAuB,GADH,CACQ,GAAEf,YAAa,UADvB,EACkC;AAC9BgB,QAAAA,MAAM,EAAE;AACNC,UAAAA,YAAY,EAAEhB;AADR;AADsB,OADlC,EAMGiB,IANH,CAMSC,GAAD,IAASA,GAAG,CAACC,IANrB,EAOGF,IAPH,CAOSrB,MAAD,IAAY;AAChB,aAAKiB,QAAL,CAAc;AAAEjB,UAAAA,MAAF;AAAUC,UAAAA,OAAO,EAAE;AAAnB,SAAd;AACD,OATH,EAUGuB,KAVH,CAUS,MAAM;AACX,aAAKP,QAAL,CAAc;AAAEhB,UAAAA,OAAO,EAAE;AAAX,SAAd;AACD,OAZH;AAaD,KAvCkD;;AAAA,SAyCnDwB,aAzCmD,GAyClCC,KAAD,IAAW;AACzB,aAAOA,KAAK,KAAK,CAAV,GAAc,KAAd,GAAsBA,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,QAAjB,KAA8B,GAA3D;AACD,KA3CkD;;AAAA,SA6CnDC,YA7CmD,GA6CnCH,KAAD,IAAW;AACxB,aAAOA,KAAK,KAAK,EAAV,GAAe,KAAf,GAAuBA,KAA9B;AACD,KA/CkD;;AAAA,SAiDnDI,aAjDmD,GAiDnC,MAAM;AACpB,YAAM9B,MAAM,GAAG,KAAKD,KAAL,CAAWC,MAA1B;AACA,UAAI+B,IAAI,GAAG,EAAX;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,QAApB,EAA8BD,CAAC,EAA/B,EAAmC;AACjC,YAAIE,QAAQ,GAAG,EAAf;;AACA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,cAAInC,MAAM,CAACa,MAAP,IAAiBsB,CAAC,GAAG,IAAIH,CAA7B,EAAgC;AAC9B;AACD;;AACD,cAAII,KAAK,GAAGpC,MAAM,CAACmC,CAAC,GAAG,IAAIH,CAAT,CAAlB;;AACA,cAAI,KAAKjC,KAAL,CAAWG,cAAX,KAA8B,QAAlC,EAA4C;AAC1CgC,YAAAA,QAAQ,CAACG,IAAT;AAAA;AACE,gCAAC,IAAD;AAAM,cAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,gCAAC,GAAD,CAAK,IAAL;AACE,cAAA,SAAS,EAAC,eADZ;AAEE,cAAA,IAAI,EAAE,aAAa9B,MAAM,CAAC6B,KAAK,CAACE,eAAP,CAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIE,gCAAC,IAAD,CAAM,GAAN;AAAU,cAAA,GAAG,EAAEF,KAAK,CAACG,SAArB;AAAgC,cAAA,OAAO,EAAC,KAAxC;AAA8C,cAAA,MAAM,EAAC,KAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAKE,gCAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,gCAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACGH,KAAK,CAACI,SADT,QACsBJ,KAAK,CAACK,UAD5B,CADF;AAAA;AAIE,gCAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACeL,KAAK,CAACM,UAAN,CAAiBC,cAAjB,EADf,CAJF,CALF,CADF,CADF;AAkBD,WAnBD,MAmBO,IAAI,KAAK5C,KAAL,CAAWG,cAAX,KAA8B,cAAlC,EAAkD;AACvDgC,YAAAA,QAAQ,CAACG,IAAT;AAAA;AACE,gCAAC,IAAD;AAAM,cAAA,SAAS,EAAC,mBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,gCAAC,GAAD,CAAK,IAAL;AACE,cAAA,SAAS,EAAC,qBADZ;AAEE,cAAA,IAAI,EAAE,mBAAmBD,KAAK,CAACQ,IAAN,CAAW5B,OAAX,CAAmB,IAAnB,EAAyB,GAAzB,CAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIE,gCAAC,IAAD,CAAM,GAAN;AAAU,cAAA,GAAG,EAAEoB,KAAK,CAACG,SAArB;AAAgC,cAAA,OAAO,EAAC,KAAxC;AAA8C,cAAA,MAAM,EAAC,KAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAKE,gCAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,gCAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAaH,KAAK,CAACQ,IAAnB,CADF;AAAA;AAEE,gCAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBACSR,KAAK,CAACI,SADf,QAC4BJ,KAAK,CAACK,UADlC,CAFF;AAAA;AAKE,gCAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCACmB,GADnB,EAEG,KAAKhB,aAAL,CAAmBW,KAAK,CAACS,cAAzB,CAFH,CALF,CALF,CADF,CADF;AAoBD,WArBM,MAqBA;AACLX,YAAAA,QAAQ,CAACG,IAAT;AAAA;AACE,gCAAC,IAAD;AAAM,cAAA,SAAS,EAAC,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,gCAAC,GAAD,CAAK,IAAL;AACE,cAAA,SAAS,EAAC,qBADZ;AAEE,cAAA,IAAI,EACF,kBACA9B,MAAM,CAAC6B,KAAK,CAACU,eAAN,GAAwB,GAAxB,GAA8BV,KAAK,CAACW,EAArC,CAAN,CACG/B,OADH,CACW,IADX,EACiB,GADjB,EAEGgC,WAFH,EAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASE,gCAAC,IAAD,CAAM,GAAN;AAAU,cAAA,GAAG,EAAEZ,KAAK,CAACG,SAArB;AAAgC,cAAA,OAAO,EAAC,KAAxC;AAA8C,cAAA,MAAM,EAAC,KAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cATF;AAAA;AAUE,gCAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,gCAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAaH,KAAK,CAACU,eAAnB,CADF;AAAA;AAEE,gCAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACa,KAAKjB,YAAL,CAAkBO,KAAK,CAACa,UAAxB,CADb,CAFF,CAVF,CADF,CADF;AAqBD;AACF;;AACDlB,QAAAA,IAAI,CAACM,IAAL;AAAA;AAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAV;AACAN,QAAAA,IAAI,CAACM,IAAL;AAAA;AAAU;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAsBH,QAAtB,CAAV;AACA,YAAIlC,MAAM,CAACa,MAAP,GAAgB,IAAImB,CAAxB,EAA2B;AAC5B;;AACD,aAAOD,IAAP;AACD,KAhIkD;;AAAA,SAkInDmB,iBAlImD,GAkI/B;AAAA;AAClB,wBAAC,WAAD;AAAa,MAAA,SAAS,EAAC,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,wBAAC,MAAD;AACE,MAAA,OAAO,EAAC,kBADV;AAEE,MAAA,EAAE,EAAC,cAFL;AAGE,MAAA,OAAO,EAAE,MAAM,KAAKC,YAAL,CAAkB,QAAlB,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF;AAAA;AAQE,wBAAC,MAAD;AACE,MAAA,OAAO,EAAC,kBADV;AAEE,MAAA,EAAE,EAAC,cAFL;AAGE,MAAA,OAAO,EAAE,MAAM,KAAKA,YAAL,CAAkB,cAAlB,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBARF;AAAA;AAeE,wBAAC,MAAD;AACE,MAAA,OAAO,EAAC,kBADV;AAEE,MAAA,EAAE,EAAC,cAFL;AAGE,MAAA,OAAO,EAAE,MAAM,KAAKA,YAAL,CAAkB,aAAlB,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAfF,CAnIiD;AAAA;;AASnDC,EAAAA,iBAAiB,GAAG;AAClB,SAAK/C,WAAL;AACD;;AAiJDgD,EAAAA,MAAM,GAAG;AACP;AAAA;AACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,0BAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAAA;AAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF;AAAA;AAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAyB,KAAKtD,KAAL,CAAWK,WAApC,OAHF,EAKG,KAAKL,KAAL,CAAWE,OAAX;AAAA;AACC,0BAAC,OAAD;AACE,QAAA,SAAS,EAAC,QADZ;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,SAAS,EAAC,gBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD;AAAA;AAOC,0BAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAW,KAAK6B,aAAL,EAAX,CAZJ;AAAA;AAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdF;AAAA;AAeE,0BAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAfF;AADF;AAmBD;;AAhLkD","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Nav,\n  CardDeck,\n  Spinner,\n  Button,\n  Card,\n  ButtonGroup,\n} from 'react-bootstrap';\nimport { api } from '../instance.js';\nimport Navigation from '../Components/Navigation';\nimport Footer from '../Components/Footer';\n\nexport default class SearchResults extends Component {\n  state = {\n    models: [],\n    loading: true,\n    routeModelType: 'cities',\n    apiModelType: 'cities',\n    searchQuery: '',\n  };\n\n  componentDidMount() {\n    this.fetchModels();\n  }\n\n  fetchModels = () => {\n    let urlSplit = String(window.location.href).split('/');\n    let searchInfo = urlSplit[urlSplit.length - 1];\n    let routeModelType = searchInfo.substring(0, searchInfo.indexOf('?'));\n    let apiModelType = routeModelType;\n    if (routeModelType === 'attractions') {\n      apiModelType = 'restaurants';\n    }\n    let searchQuery = searchInfo\n      .substring(searchInfo.indexOf('=') + 1)\n      .replace(/%20/g, ' ');\n    this.setState({ searchQuery, routeModelType, apiModelType });\n\n    api\n      .get(`${apiModelType}/search/`, {\n        params: {\n          search_query: searchQuery,\n        },\n      })\n      .then((res) => res.data)\n      .then((models) => {\n        this.setState({ models, loading: false });\n      })\n      .catch(() => {\n        this.setState({ loading: false });\n      });\n  };\n\n  formatPercent = (value) => {\n    return value === 0 ? 'N/A' : value.toFixed(2).toString() + '%';\n  };\n\n  formatString = (value) => {\n    return value === '' ? 'N/A' : value;\n  };\n\n  displayModels = () => {\n    const models = this.state.models;\n    let rows = [];\n    for (let r = 0; r < Infinity; r++) {\n      let children = [];\n      for (let c = 0; c < 4; c++) {\n        if (models.length <= c + 4 * r) {\n          break;\n        }\n        var model = models[c + 4 * r];\n        if (this.state.routeModelType === 'cities') {\n          children.push(\n            <Card className=\"cities-card\">\n              <Nav.Link\n                className=\"city-instance\"\n                href={'/cities/' + String(model.city_state_name)}\n              >\n                <Card.Img src={model.image_url} variant=\"top\" height=\"200\" />\n                <Card.Body>\n                  <Card.Title>\n                    {model.city_name}, {model.state_name}\n                  </Card.Title>\n                  <Card.Text>\n                    Population: {model.population.toLocaleString()}\n                  </Card.Text>\n                </Card.Body>\n              </Nav.Link>\n            </Card>\n          );\n        } else if (this.state.routeModelType === 'universities') {\n          children.push(\n            <Card className=\"universities-card\">\n              <Nav.Link\n                className=\"university-instance\"\n                href={'/universities/' + model.name.replace(/ /g, '_')}\n              >\n                <Card.Img src={model.image_url} variant=\"top\" height=\"200\" />\n                <Card.Body>\n                  <Card.Title>{model.name}</Card.Title>\n                  <Card.Text>\n                    City: {model.city_name}, {model.state_name}\n                  </Card.Text>\n                  <Card.Text>\n                    Acceptance Rate:{' '}\n                    {this.formatPercent(model.admission_rate)}\n                  </Card.Text>\n                </Card.Body>\n              </Nav.Link>\n            </Card>\n          );\n        } else {\n          children.push(\n            <Card className=\"attractions-card\">\n              <Nav.Link\n                className=\"attraction-instance\"\n                href={\n                  '/attractions/' +\n                  String(model.restaurant_name + '*' + model.id)\n                    .replace(/ /g, '_')\n                    .toLowerCase()\n                }\n              >\n                <Card.Img src={model.image_url} variant=\"top\" height=\"200\" />\n                <Card.Body>\n                  <Card.Title>{model.restaurant_name}</Card.Title>\n                  <Card.Text>\n                    Category: {this.formatString(model.categories)}\n                  </Card.Text>\n                </Card.Body>\n              </Nav.Link>\n            </Card>\n          );\n        }\n      }\n      rows.push(<br></br>);\n      rows.push(<div className=\"row\">{children}</div>);\n      if (models.length < 4 * r) break;\n    }\n    return rows;\n  };\n\n  modelSelectionRow = () => (\n    <ButtonGroup className=\"d-flex\">\n      <Button\n        variant=\"outline-seconday\"\n        id=\"dropdown-btn\"\n        onClick={() => this.searchModels('cities')}\n      >\n        Cities\n      </Button>\n      <Button\n        variant=\"outline-seconday\"\n        id=\"dropdown-btn\"\n        onClick={() => this.searchModels('universities')}\n      >\n        Universities\n      </Button>\n      <Button\n        variant=\"outline-seconday\"\n        id=\"dropdown-btn\"\n        onClick={() => this.searchModels('restaurants')}\n      >\n        Restaurants\n      </Button>\n    </ButtonGroup>\n  );\n\n  render() {\n    return (\n      <div>\n        <Navigation />\n        <p></p>\n        <h1>Search Results for \"{this.state.searchQuery}\"</h1>\n        {/* <Row of buttons to models/> */}\n        {this.state.loading ? (\n          <Spinner\n            animation=\"border\"\n            role=\"status\"\n            className=\"Spinner-custom\"\n          />\n        ) : (\n          <CardDeck>{this.displayModels()}</CardDeck>\n        )}\n        <p />\n        <Footer />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}