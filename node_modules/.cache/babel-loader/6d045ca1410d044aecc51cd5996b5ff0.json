{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, EventArgs, runOn, markType } from \"igniteui-react-core\";\nimport { KDTreeNode2D } from \"./KDTreeNode2D\";\nimport { Random } from \"igniteui-react-core\";\nimport { KDTreeThunk } from \"./KDTreeThunk\";\nimport { Stack$1 } from \"igniteui-react-core\";\nimport { List$1 } from \"igniteui-react-core\";\nimport { KNearestResult } from \"./KNearestResult\";\nimport { SearchData } from \"./SearchData\";\nimport { intDivide, isNaN_ } from \"igniteui-react-core\";\n/**\n * @hidden\n */\n\nvar KDTree2D =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(KDTree2D, _super);\n\n  function KDTree2D(a) {\n    var _rest = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      _rest[_i - 1] = arguments[_i];\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.a = null;\n    _this.h = null;\n    _this.g = null;\n    _this.k = 0;\n    _this.o = {};\n    _this.progressiveThunkCompleted = null;\n    _this.e = false;\n    _this.q = new Random(0);\n    _this.d = null;\n    a = a == void 0 ? 0 : a;\n\n    switch (a) {\n      case 0:\n        {\n          var c = _rest[0];\n          var d = _rest[1];\n          _this.d = _this.c(c, 0, c.length - 1, 0, d);\n        }\n        break;\n\n      case 1:\n        break;\n    }\n\n    return _this;\n  }\n\n  Object.defineProperty(KDTree2D.prototype, \"p\", {\n    get: function () {\n      return this.o;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  KDTree2D.b = function (a, b) {\n    var c = new KDTree2D(1);\n    c.d = new KDTreeNode2D();\n    c.d.g = true;\n    c.a = a;\n    c.h = new Stack$1(KDTreeThunk.$);\n    c.g = new List$1(KDTreeThunk.$, 0);\n    var d = new KDTreeThunk();\n    d.e = 0;\n    d.b = a.length - 1;\n    d.c = 0;\n    d.d = b;\n    d.a = c.d;\n    c.h.h(d);\n    return c;\n  };\n\n  KDTree2D.prototype.f = function (a) {\n    if (this.h.f == 0 && this.g.count == 0) {\n      this.a = null;\n      return false;\n    }\n\n    if (this.h.f == 0 && this.g.count > 0) {\n      return true;\n    }\n\n    this.k = this.h.d().c;\n\n    while (this.h.f > 0 && this.h.d().c == this.k) {\n      this.g.add(this.h.e());\n    }\n\n    if (a != null) {\n      a.setTimeout(runOn(this, this.y), 0);\n    } else {\n      window.setTimeout(runOn(this, this.y), 0);\n    }\n\n    return true;\n  };\n\n  KDTree2D.prototype.s = function () {\n    this.e = true;\n  };\n\n  KDTree2D.prototype.y = function () {\n    var a;\n\n    for (var b = 0; b < this.g.count; b++) {\n      if (this.e || this.a == null) {\n        return;\n      }\n\n      if (this.a.length == 0) {\n        continue;\n      }\n\n      a = this.g._inner[b];\n      this.v(a.a, this.a, a.e, a.b, a.c, a.d);\n    }\n\n    this.g.clear();\n\n    if (this.progressiveThunkCompleted != null) {\n      this.progressiveThunkCompleted(this, new EventArgs());\n    }\n  };\n\n  KDTree2D.prototype.v = function (a, b, c, d, e, f) {\n    a.g = false;\n    a.f = e % 2 == 0;\n    a.h = d - c;\n\n    if (c == d) {\n      a.b = b[c];\n      return;\n    }\n\n    if (c > d) {\n      a.g = true;\n      return;\n    }\n\n    if (d - c + 1 <= f) {\n      a.b = b[c];\n      a.a = new Array(d - c + 1);\n      var g = 0;\n\n      for (var h = c; h <= d; h++) {\n        a.a[g++] = b[h];\n      }\n\n      return;\n    }\n\n    var i = Math.max(intDivide(d - c, 2), 1);\n    var j = this.m(b, c, d, a.f, i);\n    a.b = b[j];\n\n    if (c <= j - 1) {\n      a.c = function () {\n        var $ret = new KDTreeNode2D();\n        $ret.g = true;\n        return $ret;\n      }();\n\n      a.c.h = j - 1 - c + 1;\n      this.h.h(function () {\n        var $ret = new KDTreeThunk();\n        $ret.e = c;\n        $ret.b = j - 1;\n        $ret.c = e + 1;\n        $ret.d = f;\n        $ret.a = a.c;\n        return $ret;\n      }());\n    } else {\n      a.c = null;\n    }\n\n    if (j + 1 <= d) {\n      a.d = function () {\n        var $ret = new KDTreeNode2D();\n        $ret.g = true;\n        return $ret;\n      }();\n\n      a.d.h = d - (j + 1) + 1;\n      this.h.h(function () {\n        var $ret = new KDTreeThunk();\n        $ret.e = j + 1;\n        $ret.b = d;\n        $ret.c = e + 1;\n        $ret.d = f;\n        $ret.a = a.d;\n        return $ret;\n      }());\n    } else {\n      a.d = null;\n    }\n  };\n\n  KDTree2D.prototype.c = function (a, b, c, d, e) {\n    var f = new KDTreeNode2D();\n    f.f = d % 2 == 0;\n    f.h = c - b;\n\n    if (b == c) {\n      f.b = a[b];\n      return f;\n    }\n\n    if (b > c) {\n      return null;\n    }\n\n    if (c - b + 1 <= e) {\n      f.b = a[b];\n      f.a = new Array(c - b + 1);\n      var g = 0;\n\n      for (var h = b; h <= c; h++) {\n        f.a[g++] = a[h];\n      }\n\n      return f;\n    }\n\n    var i = Math.max(intDivide(c - b, 2), 1);\n    var j = this.m(a, b, c, f.f, i);\n    f.b = a[j];\n    f.c = this.c(a, b, j - 1, d + 1, e);\n    f.d = this.c(a, j + 1, c, d + 1, e);\n    return f;\n  };\n\n  KDTree2D.prototype.l = function (a, b, c, d, e) {\n    var f = b ? a[e].a : a[e].b;\n    var g = a[e];\n    a[e] = a[d];\n    a[d] = g;\n    var h = c;\n\n    for (var i = c; i < d; i++) {\n      var j = void 0;\n\n      if (b) {\n        j = a[i].a;\n      } else {\n        j = a[i].b;\n      }\n\n      if (j <= f) {\n        g = a[h];\n        a[h] = a[i];\n        a[i] = g;\n        h++;\n      }\n    }\n\n    g = a[d];\n    a[d] = a[h];\n    a[h] = g;\n    return h;\n  };\n\n  KDTree2D.prototype.m = function (a, b, c, d, e) {\n    if (b == c) {\n      return b;\n    }\n\n    var f = this.q.next2(b, c);\n    var g = this.l(a, d, b, c, f);\n    var h = g - b + 1;\n\n    if (h == e) {\n      return g;\n    } else if (e < h) {\n      return this.m(a, b, g - 1, d, e);\n    } else {\n      return this.m(a, g + 1, c, d, e - h);\n    }\n  };\n\n  KDTree2D.prototype.w = function (a, b, c, d) {\n    this.x(a, b, c, d, this.d);\n  };\n\n  KDTree2D.prototype.x = function (a, b, c, d, e) {\n    if (e == null || e.g) {\n      return;\n    }\n\n    if (e.c == null && e.d == null) {\n      this.r(a, b, c, e, e.b, true, 0, d);\n\n      if (a.a) {\n        return;\n      }\n\n      if (e.a != null && e.a.length > 0) {\n        for (var f = 0; f < e.a.length; f++) {\n          this.r(a, b, c, e, e.a[f], false, f, d);\n\n          if (a.a) {\n            return;\n          }\n        }\n      }\n\n      return;\n    }\n\n    this.r(a, b, c, e, e.b, true, 0, d);\n\n    if (a.a) {\n      return;\n    }\n\n    if (e.f) {\n      if (b <= e.b.a) {\n        this.x(a, b, c, d, e.c);\n\n        if (a.a) {\n          return;\n        }\n\n        if (this.i(b, c, e.b.a, c) < a.c) {\n          this.x(a, b, c, d, e.d);\n        }\n\n        if (a.a) {\n          return;\n        }\n      } else {\n        this.x(a, b, c, d, e.d);\n\n        if (a.a) {\n          return;\n        }\n\n        if (this.i(b, c, e.b.a, c) < a.c) {\n          this.x(a, b, c, d, e.c);\n        }\n\n        if (a.a) {\n          return;\n        }\n      }\n    } else {\n      if (c <= e.b.b) {\n        this.x(a, b, c, d, e.c);\n\n        if (a.a) {\n          return;\n        }\n\n        if (this.i(b, c, b, e.b.b) < a.c) {\n          this.x(a, b, c, d, e.d);\n        }\n\n        if (a.a) {\n          return;\n        }\n      } else {\n        this.x(a, b, c, d, e.d);\n\n        if (a.a) {\n          return;\n        }\n\n        if (this.i(b, c, b, e.b.b) < a.c) {\n          this.x(a, b, c, d, e.c);\n        }\n\n        if (a.a) {\n          return;\n        }\n      }\n    }\n  };\n\n  KDTree2D.prototype.r = function (a, b, c, d, e, f, g, h) {\n    if (a.a) {\n      return;\n    }\n\n    if (a.e > a.f) {\n      a.a = true;\n      return;\n    }\n\n    if (a.b.count < h) {\n      if (isNaN_(a.d)) {\n        a.d = this.i(b, c, e.a, e.b);\n        a.c = a.d;\n        a.g = 0;\n      }\n\n      a.b.add(function () {\n        var $ret = new KNearestResult();\n        $ret.b = f;\n        $ret.e = g;\n        $ret.a = d;\n        $ret.c = e.a;\n        $ret.d = e.b;\n        return $ret;\n      }());\n      a.e++;\n      var i = this.i(b, c, e.a, e.b);\n\n      if (i < a.d) {\n        a.d = i;\n      }\n\n      if (i > a.c) {\n        a.c = i;\n        a.g = a.b.count - 1;\n      }\n\n      return;\n    }\n\n    var j = 0;\n\n    if (j < a.c) {\n      if (j < a.d) {\n        a.d = j;\n      }\n\n      a.b._inner[a.g] = function () {\n        var $ret = new KNearestResult();\n        $ret.b = f;\n        $ret.e = g;\n        $ret.a = d;\n        $ret.c = e.a;\n        $ret.d = e.b;\n        return $ret;\n      }();\n\n      var k = 0;\n      var l = 0;\n\n      for (var m = 0; m < a.b.count; m++) {\n        var n = this.i(b, c, a.b._inner[m].c, a.b._inner[m].d);\n\n        if (n > k) {\n          k = n;\n          l = m;\n        }\n      }\n\n      a.e++;\n    }\n  };\n\n  KDTree2D.prototype.i = function (a, b, c, d) {\n    return (a - c) * (a - c) + (b - d) * (b - d);\n  };\n\n  KDTree2D.prototype.t = function (a, b, c, d, e, f) {\n    this.u(a, this.d, b, c, d, e, f, false, 0);\n  };\n\n  KDTree2D.prototype.u = function (a, b, c, d, e, f, g, h, i) {\n    if (b == null) {\n      return;\n    }\n\n    var j = b.e;\n\n    if (i > c.g || g - f < c.f && e - d < c.e) {\n      if (b.e == null) {\n        b.e = new SearchData();\n      }\n\n      j = b.e;\n      j.a = true;\n      j.d = d;\n      j.b = e;\n      j.e = f;\n      j.c = g;\n      a.add(b);\n      return;\n    }\n\n    if (j != null) {\n      j.a = false;\n    }\n\n    if (b.c == null && b.d == null) {\n      a.add(b);\n      return;\n    }\n\n    var k;\n    var l;\n    var m;\n    var n;\n    var o;\n    var p;\n    var q;\n    var r;\n\n    if (b.f) {\n      k = d;\n      l = b.b.a;\n      m = f;\n      n = g;\n      o = b.b.a;\n      p = e;\n      q = f;\n      r = g;\n    } else {\n      k = d;\n      l = e;\n      m = f;\n      n = b.b.b;\n      o = d;\n      p = e;\n      q = b.b.b;\n      r = g;\n    }\n\n    if (h) {\n      a.add(b);\n      this.u(a, b.c, c, k, l, m, n, true, i + 1);\n      this.u(a, b.d, c, o, p, q, r, true, i + 1);\n    } else {\n      var s = false;\n\n      if (k >= c.c && l <= c.a && m >= c.d && n <= c.b) {\n        s = true;\n        a.add(b);\n        this.u(a, b.c, c, k, l, m, n, true, i + 1);\n      } else if (!(c.c > l || c.a < k || c.d > n || c.b < m)) {\n        s = true;\n        a.add(b);\n        this.u(a, b.c, c, k, l, m, n, false, i + 1);\n      }\n\n      if (o >= c.c && p <= c.a && q >= c.d && r <= c.b) {\n        if (!s) {\n          a.add(b);\n        }\n\n        this.u(a, b.d, c, o, p, q, r, true, i + 1);\n      } else if (!(c.c > p || c.a < o || c.d > r || c.b < q)) {\n        if (!s) {\n          a.add(b);\n        }\n\n        this.u(a, b.d, c, o, p, q, r, false, i + 1);\n      }\n    }\n  };\n\n  KDTree2D.prototype.z = function () {\n    this.n(this.d);\n  };\n\n  KDTree2D.prototype.n = function (a) {\n    if (a == null) {\n      return 0;\n    }\n\n    if (this.n(a.c) + this.n(a.d) != a.h) {\n      var b = 0;\n    }\n\n    return a.h + 1;\n  };\n\n  KDTree2D.$t = markType(KDTree2D, 'KDTree2D');\n  return KDTree2D;\n}(Base);\n\nexport { KDTree2D };","map":{"version":3,"sources":["../../../../src/igniteui-charts/lib/KDTree2D.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, EventArgs, runOn, markType } from \"igniteui-react-core\";\nimport { KDTreeNode2D } from \"./KDTreeNode2D\";\nimport { Random } from \"igniteui-react-core\";\nimport { KDTreeThunk } from \"./KDTreeThunk\";\nimport { Stack$1 } from \"igniteui-react-core\";\nimport { List$1 } from \"igniteui-react-core\";\nimport { KNearestResult } from \"./KNearestResult\";\nimport { SearchData } from \"./SearchData\";\nimport { intDivide, isNaN_ } from \"igniteui-react-core\";\n/**\n * @hidden\n */\nvar KDTree2D = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(KDTree2D, _super);\n    function KDTree2D(a) {\n        var _rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            _rest[_i - 1] = arguments[_i];\n        }\n        var _this = _super.call(this) || this;\n        _this.a = null;\n        _this.h = null;\n        _this.g = null;\n        _this.k = 0;\n        _this.o = {};\n        _this.progressiveThunkCompleted = null;\n        _this.e = false;\n        _this.q = new Random(0);\n        _this.d = null;\n        a = (a == void 0) ? 0 : a;\n        switch (a) {\n            case 0:\n                {\n                    var c = _rest[0];\n                    var d = _rest[1];\n                    _this.d = _this.c(c, 0, c.length - 1, 0, d);\n                }\n                break;\n            case 1: break;\n        }\n        return _this;\n    }\n    Object.defineProperty(KDTree2D.prototype, \"p\", {\n        get: function () {\n            return this.o;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    KDTree2D.b = function (a, b) {\n        var c = new KDTree2D(1);\n        c.d = new KDTreeNode2D();\n        c.d.g = true;\n        c.a = a;\n        c.h = new Stack$1(KDTreeThunk.$);\n        c.g = new List$1(KDTreeThunk.$, 0);\n        var d = new KDTreeThunk();\n        d.e = 0;\n        d.b = a.length - 1;\n        d.c = 0;\n        d.d = b;\n        d.a = c.d;\n        c.h.h(d);\n        return c;\n    };\n    KDTree2D.prototype.f = function (a) {\n        if (this.h.f == 0 && this.g.count == 0) {\n            this.a = null;\n            return false;\n        }\n        if (this.h.f == 0 && this.g.count > 0) {\n            return true;\n        }\n        this.k = this.h.d().c;\n        while (this.h.f > 0 && this.h.d().c == this.k) {\n            this.g.add(this.h.e());\n        }\n        if (a != null) {\n            a.setTimeout(runOn(this, this.y), 0);\n        }\n        else {\n            window.setTimeout(runOn(this, this.y), 0);\n        }\n        return true;\n    };\n    KDTree2D.prototype.s = function () {\n        this.e = true;\n    };\n    KDTree2D.prototype.y = function () {\n        var a;\n        for (var b = 0; b < this.g.count; b++) {\n            if (this.e || this.a == null) {\n                return;\n            }\n            if (this.a.length == 0) {\n                continue;\n            }\n            a = this.g._inner[b];\n            this.v(a.a, this.a, a.e, a.b, a.c, a.d);\n        }\n        this.g.clear();\n        if (this.progressiveThunkCompleted != null) {\n            this.progressiveThunkCompleted(this, new EventArgs());\n        }\n    };\n    KDTree2D.prototype.v = function (a, b, c, d, e, f) {\n        a.g = false;\n        a.f = (e % 2) == 0;\n        a.h = (d - c);\n        if (c == d) {\n            a.b = b[c];\n            return;\n        }\n        if (c > d) {\n            a.g = true;\n            return;\n        }\n        if ((d - c) + 1 <= f) {\n            a.b = b[c];\n            a.a = new Array((d - c) + 1);\n            var g = 0;\n            for (var h = c; h <= d; h++) {\n                a.a[g++] = b[h];\n            }\n            return;\n        }\n        var i = Math.max(intDivide((d - c), 2), 1);\n        var j = this.m(b, c, d, a.f, i);\n        a.b = b[j];\n        if (c <= j - 1) {\n            a.c = ((function () {\n                var $ret = new KDTreeNode2D();\n                $ret.g = true;\n                return $ret;\n            })());\n            a.c.h = ((j - 1) - c) + 1;\n            this.h.h(((function () {\n                var $ret = new KDTreeThunk();\n                $ret.e = c;\n                $ret.b = j - 1;\n                $ret.c = e + 1;\n                $ret.d = f;\n                $ret.a = a.c;\n                return $ret;\n            })()));\n        }\n        else {\n            a.c = null;\n        }\n        if (j + 1 <= d) {\n            a.d = ((function () {\n                var $ret = new KDTreeNode2D();\n                $ret.g = true;\n                return $ret;\n            })());\n            a.d.h = (d - (j + 1)) + 1;\n            this.h.h(((function () {\n                var $ret = new KDTreeThunk();\n                $ret.e = j + 1;\n                $ret.b = d;\n                $ret.c = e + 1;\n                $ret.d = f;\n                $ret.a = a.d;\n                return $ret;\n            })()));\n        }\n        else {\n            a.d = null;\n        }\n    };\n    KDTree2D.prototype.c = function (a, b, c, d, e) {\n        var f = new KDTreeNode2D();\n        f.f = (d % 2) == 0;\n        f.h = (c - b);\n        if (b == c) {\n            f.b = a[b];\n            return f;\n        }\n        if (b > c) {\n            return null;\n        }\n        if ((c - b) + 1 <= e) {\n            f.b = a[b];\n            f.a = new Array(c - b + 1);\n            var g = 0;\n            for (var h = b; h <= c; h++) {\n                f.a[g++] = a[h];\n            }\n            return f;\n        }\n        var i = Math.max(intDivide((c - b), 2), 1);\n        var j = this.m(a, b, c, f.f, i);\n        f.b = a[j];\n        f.c = this.c(a, b, j - 1, d + 1, e);\n        f.d = this.c(a, j + 1, c, d + 1, e);\n        return f;\n    };\n    KDTree2D.prototype.l = function (a, b, c, d, e) {\n        var f = b ? a[e].a : a[e].b;\n        var g = a[e];\n        a[e] = a[d];\n        a[d] = g;\n        var h = c;\n        for (var i = c; i < d; i++) {\n            var j = void 0;\n            if (b) {\n                j = a[i].a;\n            }\n            else {\n                j = a[i].b;\n            }\n            if (j <= f) {\n                g = a[h];\n                a[h] = a[i];\n                a[i] = g;\n                h++;\n            }\n        }\n        g = a[d];\n        a[d] = a[h];\n        a[h] = g;\n        return h;\n    };\n    KDTree2D.prototype.m = function (a, b, c, d, e) {\n        if (b == c) {\n            return b;\n        }\n        var f = this.q.next2(b, c);\n        var g = this.l(a, d, b, c, f);\n        var h = g - b + 1;\n        if (h == e) {\n            return g;\n        }\n        else if (e < h) {\n            return this.m(a, b, g - 1, d, e);\n        }\n        else {\n            return this.m(a, g + 1, c, d, e - h);\n        }\n    };\n    KDTree2D.prototype.w = function (a, b, c, d) {\n        this.x(a, b, c, d, this.d);\n    };\n    KDTree2D.prototype.x = function (a, b, c, d, e) {\n        if (e == null || e.g) {\n            return;\n        }\n        if (e.c == null && e.d == null) {\n            this.r(a, b, c, e, e.b, true, 0, d);\n            if (a.a) {\n                return;\n            }\n            if (e.a != null && e.a.length > 0) {\n                for (var f = 0; f < e.a.length; f++) {\n                    this.r(a, b, c, e, e.a[f], false, f, d);\n                    if (a.a) {\n                        return;\n                    }\n                }\n            }\n            return;\n        }\n        this.r(a, b, c, e, e.b, true, 0, d);\n        if (a.a) {\n            return;\n        }\n        if (e.f) {\n            if (b <= e.b.a) {\n                this.x(a, b, c, d, e.c);\n                if (a.a) {\n                    return;\n                }\n                if (this.i(b, c, e.b.a, c) < a.c) {\n                    this.x(a, b, c, d, e.d);\n                }\n                if (a.a) {\n                    return;\n                }\n            }\n            else {\n                this.x(a, b, c, d, e.d);\n                if (a.a) {\n                    return;\n                }\n                if (this.i(b, c, e.b.a, c) < a.c) {\n                    this.x(a, b, c, d, e.c);\n                }\n                if (a.a) {\n                    return;\n                }\n            }\n        }\n        else {\n            if (c <= e.b.b) {\n                this.x(a, b, c, d, e.c);\n                if (a.a) {\n                    return;\n                }\n                if (this.i(b, c, b, e.b.b) < a.c) {\n                    this.x(a, b, c, d, e.d);\n                }\n                if (a.a) {\n                    return;\n                }\n            }\n            else {\n                this.x(a, b, c, d, e.d);\n                if (a.a) {\n                    return;\n                }\n                if (this.i(b, c, b, e.b.b) < a.c) {\n                    this.x(a, b, c, d, e.c);\n                }\n                if (a.a) {\n                    return;\n                }\n            }\n        }\n    };\n    KDTree2D.prototype.r = function (a, b, c, d, e, f, g, h) {\n        if (a.a) {\n            return;\n        }\n        if (a.e > a.f) {\n            a.a = true;\n            return;\n        }\n        if (a.b.count < h) {\n            if (isNaN_(a.d)) {\n                a.d = this.i(b, c, e.a, e.b);\n                a.c = a.d;\n                a.g = 0;\n            }\n            a.b.add(((function () {\n                var $ret = new KNearestResult();\n                $ret.b = f;\n                $ret.e = g;\n                $ret.a = d;\n                $ret.c = e.a;\n                $ret.d = e.b;\n                return $ret;\n            })()));\n            a.e++;\n            var i = this.i(b, c, e.a, e.b);\n            if (i < a.d) {\n                a.d = i;\n            }\n            if (i > a.c) {\n                a.c = i;\n                a.g = a.b.count - 1;\n            }\n            return;\n        }\n        var j = 0;\n        if (j < a.c) {\n            if (j < a.d) {\n                a.d = j;\n            }\n            a.b._inner[a.g] = ((function () {\n                var $ret = new KNearestResult();\n                $ret.b = f;\n                $ret.e = g;\n                $ret.a = d;\n                $ret.c = e.a;\n                $ret.d = e.b;\n                return $ret;\n            })());\n            var k = 0;\n            var l = 0;\n            for (var m = 0; m < a.b.count; m++) {\n                var n = this.i(b, c, a.b._inner[m].c, a.b._inner[m].d);\n                if (n > k) {\n                    k = n;\n                    l = m;\n                }\n            }\n            a.e++;\n        }\n    };\n    KDTree2D.prototype.i = function (a, b, c, d) {\n        return (a - c) * (a - c) + (b - d) * (b - d);\n    };\n    KDTree2D.prototype.t = function (a, b, c, d, e, f) {\n        this.u(a, this.d, b, c, d, e, f, false, 0);\n    };\n    KDTree2D.prototype.u = function (a, b, c, d, e, f, g, h, i) {\n        if (b == null) {\n            return;\n        }\n        var j = b.e;\n        if (i > c.g || ((g - f) < c.f && (e - d) < c.e)) {\n            if (b.e == null) {\n                b.e = new SearchData();\n            }\n            j = b.e;\n            j.a = true;\n            j.d = d;\n            j.b = e;\n            j.e = f;\n            j.c = g;\n            a.add(b);\n            return;\n        }\n        if (j != null) {\n            j.a = false;\n        }\n        if (b.c == null && b.d == null) {\n            a.add(b);\n            return;\n        }\n        var k;\n        var l;\n        var m;\n        var n;\n        var o;\n        var p;\n        var q;\n        var r;\n        if (b.f) {\n            k = d;\n            l = b.b.a;\n            m = f;\n            n = g;\n            o = b.b.a;\n            p = e;\n            q = f;\n            r = g;\n        }\n        else {\n            k = d;\n            l = e;\n            m = f;\n            n = b.b.b;\n            o = d;\n            p = e;\n            q = b.b.b;\n            r = g;\n        }\n        if (h) {\n            a.add(b);\n            this.u(a, b.c, c, k, l, m, n, true, i + 1);\n            this.u(a, b.d, c, o, p, q, r, true, i + 1);\n        }\n        else {\n            var s = false;\n            if (k >= c.c && l <= c.a && m >= c.d && n <= c.b) {\n                s = true;\n                a.add(b);\n                this.u(a, b.c, c, k, l, m, n, true, i + 1);\n            }\n            else if (!(c.c > l || c.a < k || c.d > n || c.b < m)) {\n                s = true;\n                a.add(b);\n                this.u(a, b.c, c, k, l, m, n, false, i + 1);\n            }\n            if (o >= c.c && p <= c.a && q >= c.d && r <= c.b) {\n                if (!s) {\n                    a.add(b);\n                }\n                this.u(a, b.d, c, o, p, q, r, true, i + 1);\n            }\n            else if (!(c.c > p || c.a < o || c.d > r || c.b < q)) {\n                if (!s) {\n                    a.add(b);\n                }\n                this.u(a, b.d, c, o, p, q, r, false, i + 1);\n            }\n        }\n    };\n    KDTree2D.prototype.z = function () {\n        this.n(this.d);\n    };\n    KDTree2D.prototype.n = function (a) {\n        if (a == null) {\n            return 0;\n        }\n        if (this.n(a.c) + this.n(a.d) != a.h) {\n            var b = 0;\n        }\n        return a.h + 1;\n    };\n    KDTree2D.$t = markType(KDTree2D, 'KDTree2D');\n    return KDTree2D;\n}(Base));\nexport { KDTree2D };\n//# sourceMappingURL=KDTree2D.js.map\n"]},"metadata":{},"sourceType":"module"}